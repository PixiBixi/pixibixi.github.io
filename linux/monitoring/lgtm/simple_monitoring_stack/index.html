<!doctype html><html lang=fr class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Tous les trucs & astuces de Jerem"><meta name=author content="Jérémy DELGADO"><link href=https://wiki.jdelgado.fr/linux/monitoring/lgtm/simple_monitoring_stack/ rel=canonical><link href=../loki_alerting/ rel=prev><link href=../tips_lgtm/ rel=next><link rel=icon href=../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.18"><title>Netdata, Prometheus et Grafana : une stack de monitoring simple et puissante - Jérémy Wiki</title><link rel=stylesheet href=../../../../assets/stylesheets/main.7e37652d.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#netdata-prometheus-et-grafana-une-stack-de-monitoring-simple-et-puissante class=md-skip> Aller au contenu </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=En-tête> <a href=../../../.. title="Jérémy Wiki" class="md-header__button md-logo" aria-label="Jérémy Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Jérémy Wiki </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Netdata, Prometheus et Grafana : une stack de monitoring simple et puissante </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Rechercher placeholder=Rechercher autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Recherche> <button type=reset class="md-search__icon md-icon" title=Effacer aria-label=Effacer tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initialisation de la recherche </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/PixiBixi/pixibixi.github.io title="Aller au dépôt" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Onglets data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Sommaire </a> </li> <li class=md-tabs__item> <a href=../../../../docker/ class=md-tabs__link> Docker : L'indispensable </a> </li> <li class=md-tabs__item> <a href=../../../../guacamole/ class=md-tabs__link> Guacamole : l'outil idéal pour établir des sessions RDP, SSH et VNC </a> </li> <li class=md-tabs__item> <a href=../../../../cloud/aws/cli/ class=md-tabs__link> Cloud </a> </li> <li class=md-tabs__item> <a href=../../../../code/st3/ class=md-tabs__link> Code </a> </li> <li class=md-tabs__item> <a href=../../../../docker/use_proxy/ class=md-tabs__link> Docker </a> </li> <li class=md-tabs__item> <a href=../../../../gitlab/cli/ class=md-tabs__link> Gitlab </a> </li> <li class=md-tabs__item> <a href=../../../../hardware/hdd/wd/fix_hdd/ class=md-tabs__link> Hardware </a> </li> <li class=md-tabs__item> <a href=../../../../hypervisor/esxi/upload_iso_cli/ class=md-tabs__link> Hypervisor </a> </li> <li class=md-tabs__item> <a href=../../../../kafka/kafkactl/ class=md-tabs__link> Kafka </a> </li> <li class=md-tabs__item> <a href=../../../../kubernetes/argocd/argocd_sa/ class=md-tabs__link> Kubernetes </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../advanced/lock_ddos/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../../mac/brew/ class=md-tabs__link> Mac </a> </li> <li class=md-tabs__item> <a href=../../../../mess/github_template/ class=md-tabs__link> Mess </a> </li> <li class=md-tabs__item> <a href=../../../../misc/sources/ class=md-tabs__link> Misc </a> </li> <li class=md-tabs__item> <a href=../../../../networking/list_prefix_asn/ class=md-tabs__link> Networking </a> </li> <li class=md-tabs__item> <a href=../../../../pfsense/update_bogon_list/ class=md-tabs__link> Pfsense </a> </li> <li class=md-tabs__item> <a href=../../../../ssh/pubkey_rfc4716/ class=md-tabs__link> Ssh </a> </li> <li class=md-tabs__item> <a href=../../../../web/benchmark/benchmark_random_querystring/ class=md-tabs__link> Web </a> </li> <li class=md-tabs__item> <a href=../../../../windows/desktop/tips/hosts_file/ class=md-tabs__link> Windows </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Jérémy Wiki" class="md-nav__button md-logo" aria-label="Jérémy Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Jérémy Wiki </label> <div class=md-nav__source> <a href=https://github.com/PixiBixi/pixibixi.github.io title="Aller au dépôt" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Sommaire </span> </a> </li> <li class=md-nav__item> <a href=../../../../docker/ class=md-nav__link> <span class=md-ellipsis> Docker : L'indispensable </span> </a> </li> <li class=md-nav__item> <a href=../../../../guacamole/ class=md-nav__link> <span class=md-ellipsis> Guacamole : l'outil idéal pour établir des sessions RDP, SSH et VNC </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Cloud </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Aws </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Aws </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cloud/aws/cli/ class=md-nav__link> <span class=md-ellipsis> AWS : CLI </span> </a> </li> <li class=md-nav__item> <a href=../../../../cloud/aws/decode_error_aws/ class=md-nav__link> <span class=md-ellipsis> Decoder un message d'erreur AWS </span> </a> </li> <li class=md-nav__item> <a href=../../../../cloud/aws/glossaire/ class=md-nav__link> <span class=md-ellipsis> Glossaire du vocabulaire AWS </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Azure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Azure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cloud/azure/ephemeral_disks/ class=md-nav__link> <span class=md-ellipsis> EphemeralDisks : comment faire ? </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Gcloud </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Gcloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cloud/gcloud/follow_gke_upgrade/ class=md-nav__link> <span class=md-ellipsis> Suivre l'upgrade de son cluster GKE </span> </a> </li> <li class=md-nav__item> <a href=../../../../cloud/gcloud/misc_commands/ class=md-nav__link> <span class=md-ellipsis> Commandes utiles pour la CLI Gcloud </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Code </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../code/st3/ class=md-nav__link> <span class=md-ellipsis> St3 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docker/use_proxy/ class=md-nav__link> <span class=md-ellipsis> Utiliser un proxy pour pull les images Docker </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> Compose </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Compose </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../docker/compose/templates/ class=md-nav__link> <span class=md-ellipsis> docker-compose.yml </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Gitlab </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Gitlab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../gitlab/cli/ class=md-nav__link> <span class=md-ellipsis> Utilisation de la CLI officielle </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> Ci </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> Ci </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../gitlab/ci/optimize/ class=md-nav__link> <span class=md-ellipsis> Optimiser sa CI Gitlab </span> </a> </li> <li class=md-nav__item> <a href=../../../../gitlab/ci/scan_image/ class=md-nav__link> <span class=md-ellipsis> Intégrer un scan d'image à sa CI </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Hardware </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Hardware </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_1> <label class=md-nav__link for=__nav_8_1 id=__nav_8_1_label tabindex=0> <span class=md-ellipsis> Hdd </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_1> <span class="md-nav__icon md-icon"></span> Hdd </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_1_1> <label class=md-nav__link for=__nav_8_1_1 id=__nav_8_1_1_label tabindex=0> <span class=md-ellipsis> Wd </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_8_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_1_1> <span class="md-nav__icon md-icon"></span> Wd </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hardware/hdd/wd/fix_hdd/ class=md-nav__link> <span class=md-ellipsis> WD Green HDD, Comment prémunir le old_age prématuré </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_2> <label class=md-nav__link for=__nav_8_2 id=__nav_8_2_label tabindex=0> <span class=md-ellipsis> Nic </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> Nic </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_2_1> <label class=md-nav__link for=__nav_8_2_1 id=__nav_8_2_1_label tabindex=0> <span class=md-ellipsis> Mellanox </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_8_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_2_1> <span class="md-nav__icon md-icon"></span> Mellanox </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hardware/nic/mellanox/identify_and_upgrade_firmware/ class=md-nav__link> <span class=md-ellipsis> Identifier and upgrade son firmware Mellanox </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_3> <label class=md-nav__link for=__nav_8_3 id=__nav_8_3_label tabindex=0> <span class=md-ellipsis> San </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_3_label aria-expanded=false> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> San </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_3_1> <label class=md-nav__link for=__nav_8_3_1 id=__nav_8_3_1_label tabindex=0> <span class=md-ellipsis> Netapp </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_8_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_3_1> <span class="md-nav__icon md-icon"></span> Netapp </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hardware/san/netapp/blink_led_hdd/ class=md-nav__link> <span class=md-ellipsis> Repérer un disque dur défaillant en le faisant clignoter </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_4> <label class=md-nav__link for=__nav_8_4 id=__nav_8_4_label tabindex=0> <span class=md-ellipsis> Server </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_4_label aria-expanded=false> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8_4_1> <label class=md-nav__link for=__nav_8_4_1 id=__nav_8_4_1_label tabindex=0> <span class=md-ellipsis> Hp </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_8_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_8_4_1> <span class="md-nav__icon md-icon"></span> Hp </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hardware/server/hp/cli_sas/ class=md-nav__link> <span class=md-ellipsis> Commandes HP Smart Array en CLI (Utilisable pour un ESX...) </span> </a> </li> <li class=md-nav__item> <a href=../../../../hardware/server/hp/ilo_key/ class=md-nav__link> <span class=md-ellipsis> Clé ILO Adavanced </span> </a> </li> <li class=md-nav__item> <a href=../../../../hardware/server/hp/run_ilo/ class=md-nav__link> <span class=md-ellipsis> Lancer la console iLO depuis un Mac </span> </a> </li> <li class=md-nav__item> <a href=../../../../hardware/server/hp/run_old_ilo/ class=md-nav__link> <span class=md-ellipsis> Lancer une ancienne console iLO </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Hypervisor </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Hypervisor </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_1> <label class=md-nav__link for=__nav_9_1 id=__nav_9_1_label tabindex=0> <span class=md-ellipsis> Esxi </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_1_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1> <span class="md-nav__icon md-icon"></span> Esxi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hypervisor/esxi/upload_iso_cli/ class=md-nav__link> <span class=md-ellipsis> Uploader ses ISO en ligne de commande </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_1_2> <label class=md-nav__link for=__nav_9_1_2 id=__nav_9_1_2_label tabindex=0> <span class=md-ellipsis> Commands </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1_2> <span class="md-nav__icon md-icon"></span> Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hypervisor/esxi/commands/network/ class=md-nav__link> <span class=md-ellipsis> Commandes ESXi Network </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_1_3> <label class=md-nav__link for=__nav_9_1_3 id=__nav_9_1_3_label tabindex=0> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1_3> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hypervisor/esxi/misc/shell_access/ class=md-nav__link> <span class=md-ellipsis> Acceder à la console de l'ESXi </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_2> <label class=md-nav__link for=__nav_9_2 id=__nav_9_2_label tabindex=0> <span class=md-ellipsis> Proxmox </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2> <span class="md-nav__icon md-icon"></span> Proxmox </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hypervisor/proxmox/bootstrap_pve/ class=md-nav__link> <span class=md-ellipsis> Avoir un Proxmox clean </span> </a> </li> <li class=md-nav__item> <a href=../../../../hypervisor/proxmox/cluster/ class=md-nav__link> <span class=md-ellipsis> Gérer son cluster Proxmox </span> </a> </li> <li class=md-nav__item> <a href=../../../../hypervisor/proxmox/insert_iso_from_url/ class=md-nav__link> <span class=md-ellipsis> Ajouter une ISO depuis une URL </span> </a> </li> <li class=md-nav__item> <a href=../../../../hypervisor/proxmox/vm_as_cli/ class=md-nav__link> <span class=md-ellipsis> Créer sa VM en CLI avec cloud-init </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_2_5> <label class=md-nav__link for=__nav_9_2_5 id=__nav_9_2_5_label tabindex=0> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2_5> <span class="md-nav__icon md-icon"></span> Networking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hypervisor/proxmox/networking/nat/ class=md-nav__link> <span class=md-ellipsis> NAT </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_2_6> <label class=md-nav__link for=__nav_9_2_6 id=__nav_9_2_6_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2_6> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../hypervisor/proxmox/troubleshooting/vm_locked/ class=md-nav__link> <span class=md-ellipsis> Résoudre l'erreur '"VM is locked'" </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Kafka </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Kafka </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kafka/kafkactl/ class=md-nav__link> <span class=md-ellipsis> Kafkactl, un outil magique </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> Kubernetes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_1> <label class=md-nav__link for=__nav_11_1 id=__nav_11_1_label tabindex=0> <span class=md-ellipsis> Argocd </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_1_label aria-expanded=false> <label class=md-nav__title for=__nav_11_1> <span class="md-nav__icon md-icon"></span> Argocd </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/argocd/argocd_sa/ class=md-nav__link> <span class=md-ellipsis> Creer son service account ArgoCD </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_2> <label class=md-nav__link for=__nav_11_2 id=__nav_11_2_label tabindex=0> <span class=md-ellipsis> Cli </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_2_label aria-expanded=false> <label class=md-nav__title for=__nav_11_2> <span class="md-nav__icon md-icon"></span> Cli </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/cli/advanced_commands/ class=md-nav__link> <span class=md-ellipsis> Commandes Avancées </span> </a> </li> <li class=md-nav__item> <a href=../../../../kubernetes/cli/krew_plugins/ class=md-nav__link> <span class=md-ellipsis> Mes meilleurs plugins Krew </span> </a> </li> <li class=md-nav__item> <a href=../../../../kubernetes/cli/kubeconfig/ class=md-nav__link> <span class=md-ellipsis> Manage son $KUBECONFIG </span> </a> </li> <li class=md-nav__item> <a href=../../../../kubernetes/cli/tools/ class=md-nav__link> <span class=md-ellipsis> Outils pour mieux gérer K8S </span> </a> </li> <li class=md-nav__item> <a href=../../../../kubernetes/cli/useful_commands/ class=md-nav__link> <span class=md-ellipsis> Commandes utiles pour K8S </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_3> <label class=md-nav__link for=__nav_11_3 id=__nav_11_3_label tabindex=0> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_3_label aria-expanded=false> <label class=md-nav__title for=__nav_11_3> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/deployment/golang_kubernetes_limit/ class=md-nav__link> <span class=md-ellipsis> Golang : Définir automatiquement son GOMEMLIMIT/GOMAXPROCS </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_4> <label class=md-nav__link for=__nav_11_4 id=__nav_11_4_label tabindex=0> <span class=md-ellipsis> Operator </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_4_label aria-expanded=false> <label class=md-nav__title for=__nav_11_4> <span class="md-nav__icon md-icon"></span> Operator </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_4_1> <label class=md-nav__link for=__nav_11_4_1 id=__nav_11_4_1_label tabindex=0> <span class=md-ellipsis> Strimzi </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_11_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_11_4_1> <span class="md-nav__icon md-icon"></span> Strimzi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/operator/strimzi/rollout_strimzi/ class=md-nav__link> <span class=md-ellipsis> Comment rollout restart un composant Strimzi </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_5> <label class=md-nav__link for=__nav_11_5 id=__nav_11_5_label tabindex=0> <span class=md-ellipsis> Rancher </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_5_label aria-expanded=false> <label class=md-nav__title for=__nav_11_5> <span class="md-nav__icon md-icon"></span> Rancher </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/rancher/reset_password/ class=md-nav__link> <span class=md-ellipsis> Reset son password Rancher </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_6> <label class=md-nav__link for=__nav_11_6 id=__nav_11_6_label tabindex=0> <span class=md-ellipsis> Rke </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_6_label aria-expanded=false> <label class=md-nav__title for=__nav_11_6> <span class="md-nav__icon md-icon"></span> Rke </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/rke/bootstrap_cluster/ class=md-nav__link> <span class=md-ellipsis> Bootstrap rapidement son cluster </span> </a> </li> <li class=md-nav__item> <a href=../../../../kubernetes/rke/recover_rkestate/ class=md-nav__link> <span class=md-ellipsis> Recuperer son fichier rkestate </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_7> <label class=md-nav__link for=__nav_11_7 id=__nav_11_7_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_7_label aria-expanded=false> <label class=md-nav__title for=__nav_11_7> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../kubernetes/troubleshooting/resize_pvc_statefulset/ class=md-nav__link> <span class=md-ellipsis> Resize les PVC de son Statefulset </span> </a> </li> <li class=md-nav__item> <a href=../../../../kubernetes/troubleshooting/troubleshooting_sa/ class=md-nav__link> <span class=md-ellipsis> Debug son ServiceAccount Kubernetes </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12 checked> <label class=md-nav__link for=__nav_12 id=__nav_12_label tabindex> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=true> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_1> <label class=md-nav__link for=__nav_12_1 id=__nav_12_1_label tabindex> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_1_label aria-expanded=false> <label class=md-nav__title for=__nav_12_1> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/lock_ddos/ class=md-nav__link> <span class=md-ellipsis> Luter contre un DDOS </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/move_process_to_tmux/ class=md-nav__link> <span class=md-ellipsis> Deplacer un processus dans un tmux </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/strace/ class=md-nav__link> <span class=md-ellipsis> Utilisation de strace </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/troubleshooting_grub/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting Grub </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/understand_sysfs_procfs/ class=md-nav__link> <span class=md-ellipsis> Exploration poussée des systèmes de fichiers sysfs &amp; procfs </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_1_6> <label class=md-nav__link for=__nav_12_1_6 id=__nav_12_1_6_label tabindex=0> <span class=md-ellipsis> Cli </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_1_6_label aria-expanded=false> <label class=md-nav__title for=__nav_12_1_6> <span class="md-nav__icon md-icon"></span> Cli </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/cli/extend_partition/ class=md-nav__link> <span class=md-ellipsis> Etendre à chaud sa partition root </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_1_7> <label class=md-nav__link for=__nav_12_1_7 id=__nav_12_1_7_label tabindex=0> <span class=md-ellipsis> Shell </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_1_7_label aria-expanded=false> <label class=md-nav__title for=__nav_12_1_7> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/shell/debug_slowness_ohmyzsh/ class=md-nav__link> <span class=md-ellipsis> Debug ses lenteurs de ohmyzsh </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/shell/template_bash_script/ class=md-nav__link> <span class=md-ellipsis> Un template pour un script bash </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/shell/tips_bash/ class=md-nav__link> <span class=md-ellipsis> Astuces bash </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/shell/tips_zsh/ class=md-nav__link> <span class=md-ellipsis> Astuces zsh </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/shell/useful_commands/ class=md-nav__link> <span class=md-ellipsis> Liste de commandes utiles assez avancées </span> </a> </li> <li class=md-nav__item> <a href=../../../advanced/shell/write_bash_scripts/ class=md-nav__link> <span class=md-ellipsis> Ecrire son script bash </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_1_8> <label class=md-nav__link for=__nav_12_1_8 id=__nav_12_1_8_label tabindex=0> <span class=md-ellipsis> Systemd </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_1_8_label aria-expanded=false> <label class=md-nav__title for=__nav_12_1_8> <span class="md-nav__icon md-icon"></span> Systemd </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/systemd/create_unit/ class=md-nav__link> <span class=md-ellipsis> Créer son service systemd </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_1_9> <label class=md-nav__link for=__nav_12_1_9 id=__nav_12_1_9_label tabindex=0> <span class=md-ellipsis> Varnish </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_1_9_label aria-expanded=false> <label class=md-nav__title for=__nav_12_1_9> <span class="md-nav__icon md-icon"></span> Varnish </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced/varnish/config/ class=md-nav__link> <span class=md-ellipsis> Config varnish </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_2> <label class=md-nav__link for=__nav_12_2 id=__nav_12_2_label tabindex> <span class=md-ellipsis> Automatisation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_2_label aria-expanded=false> <label class=md-nav__title for=__nav_12_2> <span class="md-nav__icon md-icon"></span> Automatisation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_2_1> <label class=md-nav__link for=__nav_12_2_1 id=__nav_12_2_1_label tabindex=0> <span class=md-ellipsis> Ansible </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_12_2_1> <span class="md-nav__icon md-icon"></span> Ansible </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../automatisation/ansible/ansible/ class=md-nav__link> <span class=md-ellipsis> Automatisation des taches avec ansible </span> </a> </li> <li class=md-nav__item> <a href=../../../automatisation/ansible/ansible_reuse_variable/ class=md-nav__link> <span class=md-ellipsis> Réutilisation de variables ansible entre différentes tâches </span> </a> </li> <li class=md-nav__item> <a href=../../../automatisation/ansible/ansible_tips/ class=md-nav__link> <span class=md-ellipsis> Ansible : Tips </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_2_2> <label class=md-nav__link for=__nav_12_2_2 id=__nav_12_2_2_label tabindex=0> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_12_2_2> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../automatisation/misc/Makefile/ class=md-nav__link> <span class=md-ellipsis> Makefile : à quoi ça sert ? </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_2_3> <label class=md-nav__link for=__nav_12_2_3 id=__nav_12_2_3_label tabindex=0> <span class=md-ellipsis> Terraform </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_12_2_3> <span class="md-nav__icon md-icon"></span> Terraform </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../automatisation/terraform/cheatsheet/ class=md-nav__link> <span class=md-ellipsis> Cheatsheet terraform </span> </a> </li> <li class=md-nav__item> <a href=../../../automatisation/terraform/speedup/ class=md-nav__link> <span class=md-ellipsis> Accélerer Terraform </span> </a> </li> <li class=md-nav__item> <a href=../../../automatisation/terraform/tools/ class=md-nav__link> <span class=md-ellipsis> Tools Terraform indispensables </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_3> <label class=md-nav__link for=__nav_12_3 id=__nav_12_3_label tabindex> <span class=md-ellipsis> Bsd </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_3_label aria-expanded=false> <label class=md-nav__title for=__nav_12_3> <span class="md-nav__icon md-icon"></span> Bsd </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../bsd/wheel_group/ class=md-nav__link> <span class=md-ellipsis> Ajouter un utilisateur au groupe wheel </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_4> <label class=md-nav__link for=__nav_12_4 id=__nav_12_4_label tabindex> <span class=md-ellipsis> Centos </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_4_label aria-expanded=false> <label class=md-nav__title for=__nav_12_4> <span class="md-nav__icon md-icon"></span> Centos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../centos/add_epel_repositories/ class=md-nav__link> <span class=md-ellipsis> Ajouter les repositories EPEL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_5> <label class=md-nav__link for=__nav_12_5 id=__nav_12_5_label tabindex> <span class=md-ellipsis> Cli </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_5_label aria-expanded=false> <label class=md-nav__title for=__nav_12_5> <span class="md-nav__icon md-icon"></span> Cli </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cli/confrc/ class=md-nav__link> <span class=md-ellipsis> Mes fichiers de configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/define_hostname/ class=md-nav__link> <span class=md-ellipsis> Configurer correctement son hostname </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/dfc/ class=md-nav__link> <span class=md-ellipsis> DFC, la commande DF en plus </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/find/ class=md-nav__link> <span class=md-ellipsis> La commande find </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/ip/ class=md-nav__link> <span class=md-ellipsis> Mémo sur la commande IP </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/limit_bandwidth/ class=md-nav__link> <span class=md-ellipsis> Simuler des conditions réseau sur Linux </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/motd/ class=md-nav__link> <span class=md-ellipsis> Personnaliser ton motd </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/replace_base_commands/ class=md-nav__link> <span class=md-ellipsis> Remplacer les commandes de base Linux par des versions plus performantes </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/sed/ class=md-nav__link> <span class=md-ellipsis> Sed </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/ss/ class=md-nav__link> <span class=md-ellipsis> La commande ss </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/tmux/ class=md-nav__link> <span class=md-ellipsis> TMUX Multiplexeur de Shell </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_5_12> <label class=md-nav__link for=__nav_12_5_12 id=__nav_12_5_12_label tabindex=0> <span class=md-ellipsis> Git </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_5_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12_5_12> <span class="md-nav__icon md-icon"></span> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cli/git/git/ class=md-nav__link> <span class=md-ellipsis> Apprendre à se servir de git </span> </a> </li> <li class=md-nav__item> <a href=../../../cli/git/rework_files/ class=md-nav__link> <span class=md-ellipsis> Réduire la taille de son repository Git </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_6> <label class=md-nav__link for=__nav_12_6 id=__nav_12_6_label tabindex> <span class=md-ellipsis> Elasticsearch </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_6_label aria-expanded=false> <label class=md-nav__title for=__nav_12_6> <span class="md-nav__icon md-icon"></span> Elasticsearch </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../elasticsearch/log_slow_queries/ class=md-nav__link> <span class=md-ellipsis> Log des slow queries de ElasticSearch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_7> <label class=md-nav__link for=__nav_12_7 id=__nav_12_7_label tabindex> <span class=md-ellipsis> Fundamentals </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_7_label aria-expanded=false> <label class=md-nav__title for=__nav_12_7> <span class="md-nav__icon md-icon"></span> Fundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../fundamentals/base_commands/ class=md-nav__link> <span class=md-ellipsis> Rappel des commandes de base </span> </a> </li> <li class=md-nav__item> <a href=../../../fundamentals/cron/ class=md-nav__link> <span class=md-ellipsis> Rappel sur le cron </span> </a> </li> <li class=md-nav__item> <a href=../../../fundamentals/curl/ class=md-nav__link> <span class=md-ellipsis> cURL: La commande à tout faire </span> </a> </li> <li class=md-nav__item> <a href=../../../fundamentals/vim/ class=md-nav__link> <span class=md-ellipsis> VIM: L'editeur de texte de la mort </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_8> <label class=md-nav__link for=__nav_12_8 id=__nav_12_8_label tabindex> <span class=md-ellipsis> Hosting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_8_label aria-expanded=false> <label class=md-nav__title for=__nav_12_8> <span class="md-nav__icon md-icon"></span> Hosting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hosting/dns/ class=md-nav__link> <span class=md-ellipsis> Installer son NS ainsi que son resolveur DNS via BIND9 </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/ftp/ class=md-nav__link> <span class=md-ellipsis> Installer son serveur FTP </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/mail/ class=md-nav__link> <span class=md-ellipsis> Postfix/Dovecot/DKIM/Postgrey et plus encore </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/troubleshooting/ class=md-nav__link> <span class=md-ellipsis> MOZILLA_PKIX_ERROR_REQUIRED_TLS_FEATURE_MISSING </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_8_5> <label class=md-nav__link for=__nav_12_8_5 id=__nav_12_8_5_label tabindex=0> <span class=md-ellipsis> Lemp </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_8_5_label aria-expanded=false> <label class=md-nav__title for=__nav_12_8_5> <span class="md-nav__icon md-icon"></span> Lemp </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hosting/lemp/custom_server_header/ class=md-nav__link> <span class=md-ellipsis> Être encore plus safe en customisant son header Server NGINX </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/fetch_good_ips/ class=md-nav__link> <span class=md-ellipsis> Obtenir les bonnes IP sur apache derrière un reverse proxy </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/installation/ class=md-nav__link> <span class=md-ellipsis> Installer son Serveur Web : NGINX, PHP-FPM et MariaDB </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/ipv6_nginx/ class=md-nav__link> <span class=md-ellipsis> Configurer nginx pour utiliser IPv6 </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/nginx_ssl/ class=md-nav__link> <span class=md-ellipsis> Forcer le SSL sous NGINX </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/php_custom_version/ class=md-nav__link> <span class=md-ellipsis> Installer une version custom de PHP </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_8_5_7> <label class=md-nav__link for=__nav_12_8_5_7 id=__nav_12_8_5_7_label tabindex=0> <span class=md-ellipsis> Haproxy </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_12_8_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_12_8_5_7> <span class="md-nav__icon md-icon"></span> Haproxy </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hosting/lemp/haproxy/api/ class=md-nav__link> <span class=md-ellipsis> HAproxy : Utiliser son API </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/haproxy/cloudflare/ class=md-nav__link> <span class=md-ellipsis> HAproxy : Obtenir les vraies IPs depuis CloudFlare </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/haproxy/keep_real_ip/ class=md-nav__link> <span class=md-ellipsis> Conserver l'IP de son visiteur sur un reverse-proxy </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/haproxy/maintenance/ class=md-nav__link> <span class=md-ellipsis> HAproxy : Mettre un node en maintenance </span> </a> </li> <li class=md-nav__item> <a href=../../../hosting/lemp/haproxy/overview/ class=md-nav__link> <span class=md-ellipsis> Reverse proxy: HAproxy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_8_6> <label class=md-nav__link for=__nav_12_8_6 id=__nav_12_8_6_label tabindex=0> <span class=md-ellipsis> Mail </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_8_6_label aria-expanded=false> <label class=md-nav__title for=__nav_12_8_6> <span class="md-nav__icon md-icon"></span> Mail </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hosting/mail/exim_manage_dkim/ class=md-nav__link> <span class=md-ellipsis> Configurer DKIM avec Exim </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_8_7> <label class=md-nav__link for=__nav_12_8_7 id=__nav_12_8_7_label tabindex=0> <span class=md-ellipsis> Ruby </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_8_7_label aria-expanded=false> <label class=md-nav__title for=__nav_12_8_7> <span class="md-nav__icon md-icon"></span> Ruby </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hosting/ruby/install/ class=md-nav__link> <span class=md-ellipsis> Installer Ruby </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_9> <label class=md-nav__link for=__nav_12_9 id=__nav_12_9_label tabindex> <span class=md-ellipsis> Memcached </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_9_label aria-expanded=false> <label class=md-nav__title for=__nav_12_9> <span class="md-nav__icon md-icon"></span> Memcached </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../memcached/misc_commands/ class=md-nav__link> <span class=md-ellipsis> Commandes diverses avec memcached </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_10> <label class=md-nav__link for=__nav_12_10 id=__nav_12_10_label tabindex> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_10_label aria-expanded=false> <label class=md-nav__title for=__nav_12_10> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../misc/autoupgrade/ class=md-nav__link> <span class=md-ellipsis> Mise à jour automatique de ses paquets </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/convert_bin_to_iso/ class=md-nav__link> <span class=md-ellipsis> Convertir des .bin en .iso </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/create_raid/ class=md-nav__link> <span class=md-ellipsis> Création de RAID logiciels avec mdadm </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/find_kernel_options/ class=md-nav__link> <span class=md-ellipsis> Trouver les options de compilation du kernel </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/forgot_root_password/ class=md-nav__link> <span class=md-ellipsis> Réinitialiser son mot de passe root </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/info_about_pdf/ class=md-nav__link> <span class=md-ellipsis> Obtenir des informations sur vos PDF </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/locales/ class=md-nav__link> <span class=md-ellipsis> Gagner de la place en supprimant les locales inutiles </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/mancolor/ class=md-nav__link> <span class=md-ellipsis> Ajouter de la couleur à sa commande man </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/rc_package/ class=md-nav__link> <span class=md-ellipsis> Enlever les paquets '"rc'" sur dpkg </span> </a> </li> <li class=md-nav__item> <a href=../../../misc/subs/ class=md-nav__link> <span class=md-ellipsis> Télécharger ses sous-titres en ligne de commande </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_11 checked> <label class=md-nav__link for=__nav_12_11 id=__nav_12_11_label tabindex> <span class=md-ellipsis> Monitoring </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_11_label aria-expanded=true> <label class=md-nav__title for=__nav_12_11> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../eztools/ class=md-nav__link> <span class=md-ellipsis> Les outils eZ Server, des outils simple de supervision </span> </a> </li> <li class=md-nav__item> <a href=../../munin/ class=md-nav__link> <span class=md-ellipsis> Munin : l'outil de supervision sans fioritures </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_11_3> <label class=md-nav__link for=__nav_12_11_3 id=__nav_12_11_3_label tabindex=0> <span class=md-ellipsis> Check mk </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_11_3_label aria-expanded=false> <label class=md-nav__title for=__nav_12_11_3> <span class="md-nav__icon md-icon"></span> Check mk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../check_mk/add_slack_notification/ class=md-nav__link> <span class=md-ellipsis> Configurer des notifications Slack pour check_mk </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12_11_4 checked> <label class=md-nav__link for=__nav_12_11_4 id=__nav_12_11_4_label tabindex=0> <span class=md-ellipsis> Lgtm </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_11_4_label aria-expanded=true> <label class=md-nav__title for=__nav_12_11_4> <span class="md-nav__icon md-icon"></span> Lgtm </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../custom_metrics_nodeexporter/ class=md-nav__link> <span class=md-ellipsis> Ecrire une métrique custom pour node_exporter </span> </a> </li> <li class=md-nav__item> <a href=../loki_alerting/ class=md-nav__link> <span class=md-ellipsis> Générer des alertes depuis Loki </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Netdata, Prometheus et Grafana : une stack de monitoring simple et puissante </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Netdata, Prometheus et Grafana : une stack de monitoring simple et puissante </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#lexique class=md-nav__link> <span class=md-ellipsis> Lexique </span> </a> </li> <li class=md-nav__item> <a href=#detail-des-composants class=md-nav__link> <span class=md-ellipsis> Détail des composants </span> </a> <nav class=md-nav aria-label="Détail des composants"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#netdata class=md-nav__link> <span class=md-ellipsis> Netdata </span> </a> </li> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=#grafana class=md-nav__link> <span class=md-ellipsis> Grafana </span> </a> </li> <li class=md-nav__item> <a href=#choix-generaux class=md-nav__link> <span class=md-ellipsis> Choix généraux </span> </a> <nav class=md-nav aria-label="Choix généraux"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#netdata_1 class=md-nav__link> <span class=md-ellipsis> Netdata </span> </a> </li> <li class=md-nav__item> <a href=#prometheus_1 class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#installation-generale class=md-nav__link> <span class=md-ellipsis> Installation générale </span> </a> <nav class=md-nav aria-label="Installation générale"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation-configuration-de-netdata class=md-nav__link> <span class=md-ellipsis> Installation &amp; configuration de Netdata </span> </a> <nav class=md-nav aria-label="Installation & configuration de Netdata"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#via-docker class=md-nav__link> <span class=md-ellipsis> Via Docker </span> </a> </li> <li class=md-nav__item> <a href=#from-scratch class=md-nav__link> <span class=md-ellipsis> From scratch </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#installation-de-prometheus class=md-nav__link> <span class=md-ellipsis> Installation de Prometheus </span> </a> <nav class=md-nav aria-label="Installation de Prometheus"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#docker class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=#from-scratch_1 class=md-nav__link> <span class=md-ellipsis> From scratch </span> </a> </li> <li class=md-nav__item> <a href=#configuration-de-prometheus class=md-nav__link> <span class=md-ellipsis> Configuration de Prometheus </span> </a> </li> <li class=md-nav__item> <a href=#syntaxe-prometheus class=md-nav__link> <span class=md-ellipsis> Syntaxe Prometheus </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#installation-de-grafana class=md-nav__link> <span class=md-ellipsis> Installation de Grafana </span> </a> <nav class=md-nav aria-label="Installation de Grafana"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#docker_1 class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=#from-scratch_2 class=md-nav__link> <span class=md-ellipsis> From scratch </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#utiliser-prometheus-en-datasource class=md-nav__link> <span class=md-ellipsis> Utiliser Prometheus en Datasource </span> </a> </li> <li class=md-nav__item> <a href=#creation-de-son-premier-panel class=md-nav__link> <span class=md-ellipsis> Création de son premier panel </span> </a> <nav class=md-nav aria-label="Création de son premier panel"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mes-panels-grafana class=md-nav__link> <span class=md-ellipsis> Mes panels Grafana </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#trucs-astuces class=md-nav__link> <span class=md-ellipsis> Trucs &amp; Astuces </span> </a> <nav class=md-nav aria-label="Trucs & Astuces"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#grafana_1 class=md-nav__link> <span class=md-ellipsis> Grafana </span> </a> <nav class=md-nav aria-label=Grafana> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lecture-dun-timestamp class=md-nav__link> <span class=md-ellipsis> Lecture d'un timestamp </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prometheus_2 class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=#netdata_2 class=md-nav__link> <span class=md-ellipsis> Netdata </span> </a> <nav class=md-nav aria-label=Netdata> <ul class=md-nav__list> <li class=md-nav__item> <a href=#general class=md-nav__link> <span class=md-ellipsis> Général </span> </a> </li> <li class=md-nav__item> <a href=#docker_2 class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> <nav class=md-nav aria-label=Docker> <ul class=md-nav__list> <li class=md-nav__item> <a href=#resolution-des-noms-des-containers class=md-nav__link> <span class=md-ellipsis> Résolution des noms des containers </span> </a> </li> <li class=md-nav__item> <a href=#monitoring-dun-mountpoint-personnalise class=md-nav__link> <span class=md-ellipsis> Monitoring d'un mountpoint personnalisé </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pour-aller-plus-loin class=md-nav__link> <span class=md-ellipsis> Pour aller plus loin </span> </a> </li> <li class=md-nav__item> <a href=#rendre-prometheus-dynamique class=md-nav__link> <span class=md-ellipsis> Rendre Prometheus dynamique </span> </a> </li> <li class=md-nav__item> <a href=#monitorer-vos-certificats-websites class=md-nav__link> <span class=md-ellipsis> Monitorer vos certificats &amp; websites </span> </a> </li> <li class=md-nav__item> <a href=#integration-dun-systeme-dalerting class=md-nav__link> <span class=md-ellipsis> Intégration d'un système d'alerting </span> </a> <nav class=md-nav aria-label="Intégration d'un système d'alerting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#alertmanager class=md-nav__link> <span class=md-ellipsis> Alertmanager </span> </a> <nav class=md-nav aria-label=Alertmanager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#alertmanageryml class=md-nav__link> <span class=md-ellipsis> alertmanager.yml </span> </a> </li> <li class=md-nav__item> <a href=#modifications-du-fichier-prometheusyml class=md-nav__link> <span class=md-ellipsis> Modifications du fichier prometheus.yml </span> </a> </li> <li class=md-nav__item> <a href=#alertrulesyml class=md-nav__link> <span class=md-ellipsis> alert.rules.yml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bot-telegram-alertmanager class=md-nav__link> <span class=md-ellipsis> Bot Telegram Alertmanager </span> </a> </li> <li class=md-nav__item> <a href=#stockage-tres-longue-duree class=md-nav__link> <span class=md-ellipsis> Stockage très longue durée </span> </a> </li> <li class=md-nav__item> <a href=#exporters class=md-nav__link> <span class=md-ellipsis> Exporters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../tips_lgtm/ class=md-nav__link> <span class=md-ellipsis> 2-3 tips pour la stack LGTM </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_12> <label class=md-nav__link for=__nav_12_12 id=__nav_12_12_label tabindex> <span class=md-ellipsis> Mysql </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12_12> <span class="md-nav__icon md-icon"></span> Mysql </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mysql/advanced_commands/ class=md-nav__link> <span class=md-ellipsis> MySQL : Commandes avancées </span> </a> </li> <li class=md-nav__item> <a href=../../../mysql/db_mysql/ class=md-nav__link> <span class=md-ellipsis> Restaurer la DB système MySQL </span> </a> </li> <li class=md-nav__item> <a href=../../../mysql/galera_gluster/ class=md-nav__link> <span class=md-ellipsis> Créer son cluster Galera </span> </a> </li> <li class=md-nav__item> <a href=../../../mysql/users/ class=md-nav__link> <span class=md-ellipsis> Gérer ses users MySQL </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_12_5> <label class=md-nav__link for=__nav_12_12_5 id=__nav_12_12_5_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_12_5_label aria-expanded=false> <label class=md-nav__title for=__nav_12_12_5> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mysql/troubleshooting/generate_insert_into/ class=md-nav__link> <span class=md-ellipsis> Générer des INSERT INTO depuis un SELECT </span> </a> </li> <li class=md-nav__item> <a href=../../../mysql/troubleshooting/replication_slave/ class=md-nav__link> <span class=md-ellipsis> Debug sa replication Master-Slave </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_13> <label class=md-nav__link for=__nav_12_13 id=__nav_12_13_label tabindex> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_13_label aria-expanded=false> <label class=md-nav__title for=__nav_12_13> <span class="md-nav__icon md-icon"></span> Networking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../networking/buffer_nic/ class=md-nav__link> <span class=md-ellipsis> Augmenter le buffer de sa carte réseau </span> </a> </li> <li class=md-nav__item> <a href=../../../networking/openvpn/ class=md-nav__link> <span class=md-ellipsis> Installer et configurer son VPN OpenVPN </span> </a> </li> <li class=md-nav__item> <a href=../../../networking/openvpn_v6/ class=md-nav__link> <span class=md-ellipsis> Configurer son serveur OpenVPN pour de l'IPv6 </span> </a> </li> <li class=md-nav__item> <a href=../../../networking/speedtestcli/ class=md-nav__link> <span class=md-ellipsis> Effectuer un Speedtest depuis son serveur </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_13_5> <label class=md-nav__link for=__nav_12_13_5 id=__nav_12_13_5_label tabindex=0> <span class=md-ellipsis> Ipv6 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_13_5_label aria-expanded=false> <label class=md-nav__title for=__nav_12_13_5> <span class="md-nav__icon md-icon"></span> Ipv6 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../networking/ipv6/setup_online/ class=md-nav__link> <span class=md-ellipsis> Configurer son IPv6 chez Online </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_14> <label class=md-nav__link for=__nav_12_14 id=__nav_12_14_label tabindex> <span class=md-ellipsis> Postgres </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_14_label aria-expanded=false> <label class=md-nav__title for=__nav_12_14> <span class="md-nav__icon md-icon"></span> Postgres </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../postgres/commands/ class=md-nav__link> <span class=md-ellipsis> Commandes utiles Postgres </span> </a> </li> <li class=md-nav__item> <a href=../../../postgres/postgresql_replication/ class=md-nav__link> <span class=md-ellipsis> PostgreSQL Replication </span> </a> </li> <li class=md-nav__item> <a href=../../../postgres/upgrade_version/ class=md-nav__link> <span class=md-ellipsis> Upgrade sa version de PostgreSQL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_15> <label class=md-nav__link for=__nav_12_15 id=__nav_12_15_label tabindex> <span class=md-ellipsis> Redis </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_15_label aria-expanded=false> <label class=md-nav__title for=__nav_12_15> <span class="md-nav__icon md-icon"></span> Redis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../redis/cluster_ha/ class=md-nav__link> <span class=md-ellipsis> Déployer un Redis en High Availability </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_16> <label class=md-nav__link for=__nav_12_16 id=__nav_12_16_label tabindex> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_16_label aria-expanded=false> <label class=md-nav__title for=__nav_12_16> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../security/disable_patches/ class=md-nav__link> <span class=md-ellipsis> Désactiver les patchs de sécurité Meltdown &amp; co </span> </a> </li> <li class=md-nav__item> <a href=../../../security/hardening_sshd/ class=md-nav__link> <span class=md-ellipsis> Hardening simple du serveur SSH </span> </a> </li> <li class=md-nav__item> <a href=../../../security/ipset/ class=md-nav__link> <span class=md-ellipsis> Apprendre à se servir d'ipset </span> </a> </li> <li class=md-nav__item> <a href=../../../security/iptables_country/ class=md-nav__link> <span class=md-ellipsis> Bloquer en masse les IPs d'un pays avec ipset </span> </a> </li> <li class=md-nav__item> <a href=../../../security/issued_crt/ class=md-nav__link> <span class=md-ellipsis> Lister tous les certificats émis </span> </a> </li> <li class=md-nav__item> <a href=../../../security/logwatch/ class=md-nav__link> <span class=md-ellipsis> Installer et configurer LogWatch </span> </a> </li> <li class=md-nav__item> <a href=../../../security/password_pam/ class=md-nav__link> <span class=md-ellipsis> Améliorer la sécurité des mots de passe par défaut </span> </a> </li> <li class=md-nav__item> <a href=../../../security/portsentry/ class=md-nav__link> <span class=md-ellipsis> Installer et configuer PortSentry </span> </a> </li> <li class=md-nav__item> <a href=../../../security/rkhunter/ class=md-nav__link> <span class=md-ellipsis> Installer et configurer RKHunter </span> </a> </li> <li class=md-nav__item> <a href=../../../security/sftp/ class=md-nav__link> <span class=md-ellipsis> Accès sécurisé via sFTP (Chroot SSH) </span> </a> </li> <li class=md-nav__item> <a href=../../../security/slack_notifications_ssh/ class=md-nav__link> <span class=md-ellipsis> Configurer des notifications Slack pour SSH </span> </a> </li> <li class=md-nav__item> <a href=../../../security/ssh_improve_speed/ class=md-nav__link> <span class=md-ellipsis> Améliorer la vitesse de connexion à votre serveur SSH </span> </a> </li> <li class=md-nav__item> <a href=../../../security/ssh_log_commands/ class=md-nav__link> <span class=md-ellipsis> Logger les actions SSH utilisateurs simplement </span> </a> </li> <li class=md-nav__item> <a href=../../../security/telegram_notifications_ssh/ class=md-nav__link> <span class=md-ellipsis> Configurer des notifications Telegram pour SSH </span> </a> </li> <li class=md-nav__item> <a href=../../../security/whitelist_ip/ class=md-nav__link> <span class=md-ellipsis> Whitelister une série d'IP à l'aide d'IPset et iptables </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_17> <label class=md-nav__link for=__nav_12_17 id=__nav_12_17_label tabindex> <span class=md-ellipsis> Selfhost </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_12_17_label aria-expanded=false> <label class=md-nav__title for=__nav_12_17> <span class="md-nav__icon md-icon"></span> Selfhost </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../selfhost/ajenti/ class=md-nav__link> <span class=md-ellipsis> Gérer son serveur en ligne via Ajenti </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/h5ai/ class=md-nav__link> <span class=md-ellipsis> Partager ses fichiers avec H5ai </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/koel/ class=md-nav__link> <span class=md-ellipsis> Streamer sa musique depuis Koel </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/nextcloud/ class=md-nav__link> <span class=md-ellipsis> NextCloud, son cloud personnel </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/selfoss/ class=md-nav__link> <span class=md-ellipsis> Selfoss, son Reader RSS self-hosted </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/sonerezh/ class=md-nav__link> <span class=md-ellipsis> Sonerezh </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/subsonic/ class=md-nav__link> <span class=md-ellipsis> Bypass donation subsonic </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/youtubedl/ class=md-nav__link> <span class=md-ellipsis> Sauvegarder ses vidéos avec YoutubeDL et sa GUI </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12_17_9> <label class=md-nav__link for=__nav_12_17_9 id=__nav_12_17_9_label tabindex=0> <span class=md-ellipsis> Torrent </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_12_17_9_label aria-expanded=false> <label class=md-nav__title for=__nav_12_17_9> <span class="md-nav__icon md-icon"></span> Torrent </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../selfhost/torrent/mktorrent/ class=md-nav__link> <span class=md-ellipsis> mktorrent </span> </a> </li> <li class=md-nav__item> <a href=../../../selfhost/torrent/rutorrent/ class=md-nav__link> <span class=md-ellipsis> ruTorrent, WebUI rTorrent </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13 id=__nav_13_label tabindex=0> <span class=md-ellipsis> Mac </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_13_label aria-expanded=false> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> Mac </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mac/brew/ class=md-nav__link> <span class=md-ellipsis> Brew, le package manager de MacOS </span> </a> </li> <li class=md-nav__item> <a href=../../../../mac/brew_xcode/ class=md-nav__link> <span class=md-ellipsis> Brew : L'installer sans XCode </span> </a> </li> <li class=md-nav__item> <a href=../../../../mac/mind-view/ class=md-nav__link> <span class=md-ellipsis> MindView </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_13_4> <label class=md-nav__link for=__nav_13_4 id=__nav_13_4_label tabindex=0> <span class=md-ellipsis> Iterm </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_13_4_label aria-expanded=false> <label class=md-nav__title for=__nav_13_4> <span class="md-nav__icon md-icon"></span> Iterm </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_13_4_1> <label class=md-nav__link for=__nav_13_4_1 id=__nav_13_4_1_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_13_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_13_4_1> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mac/iterm/troubleshooting/alt_arrow/ class=md-nav__link> <span class=md-ellipsis> Remap le Alt+Arrow de iTerm </span> </a> </li> <li class=md-nav__item> <a href=../../../../mac/iterm/troubleshooting/first_chat/ class=md-nav__link> <span class=md-ellipsis> Enlever le premier caractère bizarre de iTerm </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_14> <label class=md-nav__link for=__nav_14 id=__nav_14_label tabindex=0> <span class=md-ellipsis> Mess </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_14_label aria-expanded=false> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Mess </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mess/github_template/ class=md-nav__link> <span class=md-ellipsis> Générer un template pour ses Pull Request et ses Issues </span> </a> </li> <li class=md-nav__item> <a href=../../../../mess/linux_performances/ class=md-nav__link> <span class=md-ellipsis> Monitoring des performances sous Linux </span> </a> </li> <li class=md-nav__item> <a href=../../../../mess/optimization/ class=md-nav__link> <span class=md-ellipsis> Optimisations </span> </a> </li> <li class=md-nav__item> <a href=../../../../mess/scripts_useful/ class=md-nav__link> <span class=md-ellipsis> Scripts utiles </span> </a> </li> <li class=md-nav__item> <a href=../../../../mess/useful_links/ class=md-nav__link> <span class=md-ellipsis> Bordel de lien </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_14_6> <label class=md-nav__link for=__nav_14_6 id=__nav_14_6_label tabindex=0> <span class=md-ellipsis> Download </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_14_6_label aria-expanded=false> <label class=md-nav__title for=__nav_14_6> <span class="md-nav__icon md-icon"></span> Download </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mess/download/netflix_subs/ class=md-nav__link> <span class=md-ellipsis> Télécharger les sous-titres Netflix simplement </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_14_7> <label class=md-nav__link for=__nav_14_7 id=__nav_14_7_label tabindex=0> <span class=md-ellipsis> Fibre optique </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_14_7_label aria-expanded=false> <label class=md-nav__title for=__nav_14_7> <span class="md-nav__icon md-icon"></span> Fibre optique </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mess/fibre_optique/info_transceiver/ class=md-nav__link> <span class=md-ellipsis> Informations utile sur les dénominations fibre optique </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_15> <label class=md-nav__link for=__nav_15 id=__nav_15_label tabindex=0> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_15_label aria-expanded=false> <label class=md-nav__title for=__nav_15> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../misc/sources/ class=md-nav__link> <span class=md-ellipsis> Mes sources </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16> <label class=md-nav__link for=__nav_16 id=__nav_16_label tabindex=0> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_16_label aria-expanded=false> <label class=md-nav__title for=__nav_16> <span class="md-nav__icon md-icon"></span> Networking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../networking/list_prefix_asn/ class=md-nav__link> <span class=md-ellipsis> Lister les préfixes annoncés par un AS </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/proof_files/ class=md-nav__link> <span class=md-ellipsis> Tester la bande passante effective de son serveur avec des proofs files </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/weathermap/ class=md-nav__link> <span class=md-ellipsis> Les weathermaps </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16_4> <label class=md-nav__link for=__nav_16_4 id=__nav_16_4_label tabindex=0> <span class=md-ellipsis> Cisco </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_16_4_label aria-expanded=false> <label class=md-nav__title for=__nav_16_4> <span class="md-nav__icon md-icon"></span> Cisco </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../networking/cisco/cdp/ class=md-nav__link> <span class=md-ellipsis> Le Protocole CDP </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/commandes_base/ class=md-nav__link> <span class=md-ellipsis> Commandes de base Cisco IOS </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/dns/ class=md-nav__link> <span class=md-ellipsis> Cisco : Désactiver la résolution DNS </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/lldp/ class=md-nav__link> <span class=md-ellipsis> Le Protocole LLDP </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/qos/ class=md-nav__link> <span class=md-ellipsis> QOS Cisco </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/routage_vlan/ class=md-nav__link> <span class=md-ellipsis> Cisco : Routage Inter-VLAN </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/security/ class=md-nav__link> <span class=md-ellipsis> Switch Cisco : Accroitre la sécurité </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/serveur_dhcp/ class=md-nav__link> <span class=md-ellipsis> Installer un serveur DHCP sur un routeur Cisco </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/ssh/ class=md-nav__link> <span class=md-ellipsis> Serveur SSH </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/stp/ class=md-nav__link> <span class=md-ellipsis> STP : Spanning Tree Protocol </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/cisco/vlan/ class=md-nav__link> <span class=md-ellipsis> Cisco : Créér son VLAN </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16_4_12> <label class=md-nav__link for=__nav_16_4_12 id=__nav_16_4_12_label tabindex=0> <span class=md-ellipsis> Ipv6 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_16_4_12_label aria-expanded=false> <label class=md-nav__title for=__nav_16_4_12> <span class="md-nav__icon md-icon"></span> Ipv6 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../networking/cisco/ipv6/ospf_ipv6/ class=md-nav__link> <span class=md-ellipsis> OSPF en IPv6 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16_4_13> <label class=md-nav__link for=__nav_16_4_13 id=__nav_16_4_13_label tabindex=0> <span class=md-ellipsis> Mpls </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_16_4_13_label aria-expanded=false> <label class=md-nav__title for=__nav_16_4_13> <span class="md-nav__icon md-icon"></span> Mpls </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../networking/cisco/mpls/ttl_propagation/ class=md-nav__link> <span class=md-ellipsis> Désactiver la propagation du TTL en MPLS </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16_4_14> <label class=md-nav__link for=__nav_16_4_14 id=__nav_16_4_14_label tabindex=0> <span class=md-ellipsis> Transceiver </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_16_4_14_label aria-expanded=false> <label class=md-nav__title for=__nav_16_4_14> <span class="md-nav__icon md-icon"></span> Transceiver </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../networking/cisco/transceiver/noname/ class=md-nav__link> <span class=md-ellipsis> Autoriser les transceiver no-name </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16_5> <label class=md-nav__link for=__nav_16_5 id=__nav_16_5_label tabindex=0> <span class=md-ellipsis> Mkt </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_16_5_label aria-expanded=false> <label class=md-nav__title for=__nav_16_5> <span class="md-nav__icon md-icon"></span> Mkt </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../networking/mkt/install_ipsec/ class=md-nav__link> <span class=md-ellipsis> IPSEC sur Mikrotik </span> </a> </li> <li class=md-nav__item> <a href=../../../../networking/mkt/netflix_vpn/ class=md-nav__link> <span class=md-ellipsis> Faire passer Netflix sur un VPN </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_17> <label class=md-nav__link for=__nav_17 id=__nav_17_label tabindex=0> <span class=md-ellipsis> Pfsense </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_17_label aria-expanded=false> <label class=md-nav__title for=__nav_17> <span class="md-nav__icon md-icon"></span> Pfsense </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../pfsense/update_bogon_list/ class=md-nav__link> <span class=md-ellipsis> Mise à jour de la bogon list via l'interface graphique </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_17_2> <label class=md-nav__link for=__nav_17_2 id=__nav_17_2_label tabindex=0> <span class=md-ellipsis> Network </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_17_2_label aria-expanded=false> <label class=md-nav__title for=__nav_17_2> <span class="md-nav__icon md-icon"></span> Network </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../pfsense/network/gateway_outside_network/ class=md-nav__link> <span class=md-ellipsis> Ajouter une gateway en dehors de son réseau </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_18> <label class=md-nav__link for=__nav_18 id=__nav_18_label tabindex=0> <span class=md-ellipsis> Ssh </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_18_label aria-expanded=false> <label class=md-nav__title for=__nav_18> <span class="md-nav__icon md-icon"></span> Ssh </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ssh/pubkey_rfc4716/ class=md-nav__link> <span class=md-ellipsis> Générer une clé SSH au format RFC 4716 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_19> <label class=md-nav__link for=__nav_19 id=__nav_19_label tabindex=0> <span class=md-ellipsis> Web </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_19_label aria-expanded=false> <label class=md-nav__title for=__nav_19> <span class="md-nav__icon md-icon"></span> Web </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_19_1> <label class=md-nav__link for=__nav_19_1 id=__nav_19_1_label tabindex=0> <span class=md-ellipsis> Benchmark </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_19_1_label aria-expanded=false> <label class=md-nav__title for=__nav_19_1> <span class="md-nav__icon md-icon"></span> Benchmark </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../web/benchmark/benchmark_random_querystring/ class=md-nav__link> <span class=md-ellipsis> Benchmark avec une random query string </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_19_2> <label class=md-nav__link for=__nav_19_2 id=__nav_19_2_label tabindex=0> <span class=md-ellipsis> Wordpress </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_19_2_label aria-expanded=false> <label class=md-nav__title for=__nav_19_2> <span class="md-nav__icon md-icon"></span> Wordpress </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../web/wordpress/migrate_wordpress_sql/ class=md-nav__link> <span class=md-ellipsis> Requêtes SQL pour migrer son WordPress </span> </a> </li> <li class=md-nav__item> <a href=../../../../web/wordpress/tips_sql/ class=md-nav__link> <span class=md-ellipsis> Requêtes SQL afin d'optimiser son site </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20> <label class=md-nav__link for=__nav_20 id=__nav_20_label tabindex=0> <span class=md-ellipsis> Windows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_20_label aria-expanded=false> <label class=md-nav__title for=__nav_20> <span class="md-nav__icon md-icon"></span> Windows </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_1> <label class=md-nav__link for=__nav_20_1 id=__nav_20_1_label tabindex=0> <span class=md-ellipsis> Desktop </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_20_1_label aria-expanded=false> <label class=md-nav__title for=__nav_20_1> <span class="md-nav__icon md-icon"></span> Desktop </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_1_1> <label class=md-nav__link for=__nav_20_1_1 id=__nav_20_1_1_label tabindex=0> <span class=md-ellipsis> Tips </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_20_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_20_1_1> <span class="md-nav__icon md-icon"></span> Tips </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/desktop/tips/hosts_file/ class=md-nav__link> <span class=md-ellipsis> Hosts File </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/desktop/tips/improve_privacy/ class=md-nav__link> <span class=md-ellipsis> Ameliorer sa privacy sous Windows </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/desktop/tips/install_main_softwares/ class=md-nav__link> <span class=md-ellipsis> Installer tous les logiciels de base via un simple installateur </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/desktop/tips/long_path/ class=md-nav__link> <span class=md-ellipsis> Windows 10 : Comment activer la gestion des chemins trop long ? </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2> <label class=md-nav__link for=__nav_20_2 id=__nav_20_2_label tabindex=0> <span class=md-ellipsis> Server </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_20_2_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2> <span class="md-nav__icon md-icon"></span> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_1> <label class=md-nav__link for=__nav_20_2_1 id=__nav_20_2_1_label tabindex=0> <span class=md-ellipsis> Admin </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_20_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_1> <span class="md-nav__icon md-icon"></span> Admin </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_1_1> <label class=md-nav__link for=__nav_20_2_1_1 id=__nav_20_2_1_1_label tabindex=0> <span class=md-ellipsis> Jobs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_20_2_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_1_1> <span class="md-nav__icon md-icon"></span> Jobs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/server/admin/jobs/schedule_jobs_scripts/ class=md-nav__link> <span class=md-ellipsis> Exécuter un script PowerShell via une tâche planifiée </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_2> <label class=md-nav__link for=__nav_20_2_2 id=__nav_20_2_2_label tabindex=0> <span class=md-ellipsis> Core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_20_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_2> <span class="md-nav__icon md-icon"></span> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/server/core/setup_default_powershell/ class=md-nav__link> <span class=md-ellipsis> Définir PowerShell en temps que shell par défaut </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_3> <label class=md-nav__link for=__nav_20_2_3 id=__nav_20_2_3_label tabindex=0> <span class=md-ellipsis> Firewall </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_20_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_3> <span class="md-nav__icon md-icon"></span> Firewall </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/server/firewall/access_without_shortcut/ class=md-nav__link> <span class=md-ellipsis> Accéder au Firewall sans Icône ni raccourci </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_4> <label class=md-nav__link for=__nav_20_2_4 id=__nav_20_2_4_label tabindex=0> <span class=md-ellipsis> Powershell </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_20_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_4> <span class="md-nav__icon md-icon"></span> Powershell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/server/powershell/ad_server/ class=md-nav__link> <span class=md-ellipsis> Configuer un AD via Powershell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/allow_icmp/ class=md-nav__link> <span class=md-ellipsis> Autoriser l'ICMP sur un serveur Windows 2012R2 en PowerShell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/command_time_execution/ class=md-nav__link> <span class=md-ellipsis> Connaitre le temps d'exécution d'une commande PowerShell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/dhcp_server/ class=md-nav__link> <span class=md-ellipsis> Installer et configurer un serveur DHCP en PowerShell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/disable_tlsv1/ class=md-nav__link> <span class=md-ellipsis> Désactiver TLSv1 et TLSv1.1 </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/first_setup/ class=md-nav__link> <span class=md-ellipsis> Setup de base d'un Windows 2012R2 </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/import_csv_users/ class=md-nav__link> <span class=md-ellipsis> Importer des utilisateurs CSV dans un AD via PowerShell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/initiate_iscsi/ class=md-nav__link> <span class=md-ellipsis> Initier des connexions iSCSi en CLI </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/install_drivers/ class=md-nav__link> <span class=md-ellipsis> Installer des drivers via PowerShell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/mount_iso/ class=md-nav__link> <span class=md-ellipsis> Monter un ISO directement via PowerShell </span> </a> </li> <li class=md-nav__item> <a href=../../../../windows/server/powershell/useful_vars/ class=md-nav__link> <span class=md-ellipsis> Variables built-in utiles </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_4_12> <label class=md-nav__link for=__nav_20_2_4_12 id=__nav_20_2_4_12_label tabindex=0> <span class=md-ellipsis> Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_20_2_4_12_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_4_12> <span class="md-nav__icon md-icon"></span> Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/server/powershell/storage/pool/ class=md-nav__link> <span class=md-ellipsis> Manipuler les HDD en Powershell </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_20_2_5> <label class=md-nav__link for=__nav_20_2_5 id=__nav_20_2_5_label tabindex=0> <span class=md-ellipsis> Registry </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_20_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_20_2_5> <span class="md-nav__icon md-icon"></span> Registry </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../windows/server/registry/useful_keys/ class=md-nav__link> <span class=md-ellipsis> Clés de Registre Utiles </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=netdata-prometheus-et-grafana-une-stack-de-monitoring-simple-et-puissante>Netdata, Prometheus et Grafana : une stack de monitoring simple et puissante</h1> <p><img alt="Global image" src=../_img/monitoring_stack.jpeg></p> <h2 id=introduction>Introduction</h2> <div class="admonition info versions des logiciels"> <p class=admonition-title>Info</p> <p>Cette documentation contient utilise des versions des logiciels qui peuvent ne pas être les dernières sur le marché. N'oubliez pas de vérifier</p> </div> <p>Ces derniers temps, j'ai cherché quelques stacks de monitoring simples à mettre en place mais également efficaces avec des métriques pertinentes. Je suis passé par beaucoup de systèmes de monitoring (Check_MK, Sensu, LibreNMS, Shinken...) sans avoir été satisfait. Soit les métriques n'étaient pas pertinentes ; soit l'installation était trop complexe... Bref, il y avait toujours quelque chose qui ne me convenait pas, c'est là que j'ai découvert Netdata, puis peu de temps après, Prometheus et Grafana. Pour bien comprendre ce tutoriel, voici un lexique avec les notions de base :</p> <h2 id=lexique>Lexique</h2> <ul> <li> <p><strong>Stack</strong> : Une stack d'applications est une suite ou un ensemble d'applications qui aident à réaliser une tâche précise.</p> </li> <li> <p><strong>Métrique</strong> : Mesure précise d'un composant (logiciel ou matériel), ex : Pourcentage de CPU utilisé à l'instant T...</p> </li> <li> <p><strong>Exporter</strong> : Outil qui va récolter les métriques d'un système (CPU utilisé, RAM utilisée...), les traiter et les envoyer à un logiciel.</p> </li> <li> <p><strong>Recolter</strong> : Logiciel qui va s'occuper de stocker les métriques envoyées par l'exporter</p> </li> <li> <p><strong>TSDB</strong> : Une Time Series Database (TSDB) est une base de données optimisée pour les données horodatées ou les séries chronologiques. Une '"time serie'" est seulement une suite de mesures ou évènements qui sont monitorées, downsampled et agrégées dans le temps.</p> </li> <li> <p><strong>Downsampling</strong> : Le downsampling (sous-échantillonnage) est une opération mathématique extrêmement simple permettant de créer un échantillon. Par exemple, si nous avons 60 échantillons de l'utilisation du CPU sur une minute, cela fait 1 par seconde et représente un poids non négligeable, nous pouvons donc faire un downsampling à 12 mesures par minute, nous aurons tout de même une mesure relativement précise avec un poids divisé par 5. Le downsampling rend donc la mesure moins précise mais beaucoup plus légère, nous utilisons donc le downsampling pour les anciennes données pour lesquelles une précision accrue n'est pas nécessaire.</p> </li> </ul> <h2 id=detail-des-composants>Détail des composants</h2> <h3 id=netdata>Netdata</h3> <p>Netdata est un système distribué de monitoring des performances de votre hôte mais également des diverses applications qui y sont installées. Il s'agit d'un agent de surveillance hautement optimisé que nous pouvons installer sur tous vos systèmes et conteneurs.</p> <p>Il fournit un aperçu en temps réel (grâce à sa granularité de 1s) de tout ce qui se passe sur les systèmes sur lesquels il fonctionne (y compris les serveurs web, les bases de données et les applications), au travers de tableaux de bord interactifs accessibles via son interface web.</p> <p>Netdata est rapide et efficace, conçu pour fonctionner en permanence sur tous les systèmes (serveurs physiques,virtuels et conteneurs), sans perturber leur fonction principale.</p> <p>Il s'agit d'un logiciel libre et open-source qui fonctionne actuellement sous Linux, FreeBSD et qui est également accessible sous container Docker.</p> <h3 id=prometheus>Prometheus</h3> <p>Prometheus est, dans notre stack, notre TSDB. C'est lui qui va s'occuper de stocker nos données reçues de l'exporter (Netdata) et de les agréger.</p> <h3 id=grafana>Grafana</h3> <p>Depuis de nombreuses années, Grafana est l'outil par excellence de visualisation de données. Grâce à un dashboard totalement personnalisable et de nombreuses sources de données, Grafana s'est donc naturellement imposé dans cette stack de monitoring. Il va s'occuper d'afficher les données récoltées dans Prometheus à notre guise.</p> <h3 id=choix-generaux>Choix généraux</h3> <h4 id=netdata_1>Netdata</h4> <p>Il existe beaucoup d'exporters (Node-Exporter + cAdvisor, Netdata,Telegraf)... pour tout logiciel (HAproxy,NGINX,PHP-FPM)</p> <p>Cependant, j'ai fait le choix après avoir testé plusieurs exporters d'utiliser Netdata. Ce logiciel intégre des milliers de métriques matériels mais également de nombreuses logiciels (Plugins MySQL, Nginx...) tout ça sans aucune configuration. De plus, Netdata dispose nativement d'un système d'alerte pertinent avec de nombreuses destinations : Slack, Email, Telegram...</p> <p>Enfin, il s'agit d'un logiciel ne consommant que très peu de RAM et de CPU. Ses métriques sont exportables en quelques clics vers de nombreuses TSDB tels que InfluxDB, Prometheus... Les métriques exportées à Prometheus sont extrêmement claires.</p> <p>L'avantage comparativement à d'autres exporter est qu'il intègre containers Docker et métriques de l'hôte. Par exemple, pour avoir ces métriques avec un autre exporter, je dois installer Node-exporter + cAdvisor.</p> <h4 id=prometheus_1>Prometheus</h4> <p>J'ai choisi Prometheus en TSDB principalement car il fallait utiliser OpenTSDB en backend en plus de InfluxDB si nous souhaitions utiliser ce dernier avec Netdata. De plus, je trouve le langage de query de Prometheus (PromQL) assez intuitif et puissant.</p> <h2 id=installation-generale>Installation générale</h2> <h3 id=installation-configuration-de-netdata>Installation &amp; configuration de Netdata</h3> <p>2 méthodes pour installer Netdata, soit via image Docker, soit '"à la main'". Pour ma part, j'ai un serveur <em>from scratch</em> et les autres sous Docker, j'ai donc utilisé les 2 méthodes.</p> <h4 id=via-docker>Via Docker</h4> <p>Évidemment, il est nécessaire d'avoir une installation Docker à jour. Pour cela, il suffit de suivre les <a href=https://docs.docker.com/install>instructions officielles</a>. Une fois cela fait, 2 méthodes de lancement possible : via docker ou docker-compose. Encore une fois, j'utilise compose pour une question de cohérence. Tous mes containers sont ordonnancés dans un fichier docker-compose.yml, les 2 méthodes seront présentées :</p> <details class=note> <summary>Netdata : Running with docker</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>-d<span class=w> </span>--name<span class=o>=</span>netdata<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=s1>   -p 19999:19999 &#39;</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>   </span>-v<span class=w> </span>/proc:/host/proc:ro<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=s1>   -v /sys:/host/sys:ro &#39;</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>   </span>-v<span class=w> </span>/etc/os-release:/host/etc/os-release:ro<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=s1>   --cap-add SYS_PTRACE &#39;</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>   </span>--security-opt<span class=w> </span><span class=nv>apparmor</span><span class=o>=</span>unconfined<span class=w> </span><span class=err>&#39;</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>   </span>netdata/netdata
</code></pre></div> </details> <details class=abstract> <summary>docker-compose.yml</summary> <div class=highlight><span class=filename>docker-compose.yml</span><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nt>services</span><span class=p>:</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>netdata</span><span class=p>:</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">netdata/netdata</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">netdata</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$FQDN</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">19999:19999</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=nt>cap_add</span><span class=p>:</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">SYS_PTRACE</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>    </span><span class=nt>security_opt</span><span class=p>:</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apparmor:unconfined</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/proc:/host/proc:ro</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/sys:/host/sys:ro</span>
</code></pre></div> </details> <p>Et pour le lancer : <code>docker-compose up -d</code></p> <p>Dans les 2 cas, il est possible de mettre Netdata derrière un reverse-proxy pour plus de sécurité. Lorsque Netdata est lancé, il sera accessible sur le port 19999 ou via votre reverse-proxy configuré.</p> <p>Nous verrons par la suite comment monitorer plus précisément nos containers Docker.</p> <h4 id=from-scratch>From scratch</h4> <p>From scratch, il nous suffira de lancer le script d'installation de netdata qui est très bien fait. La commande indiquée dans le GitHub Netdata est la suivante :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>bash<span class=w> </span>&lt;<span class=o>(</span>curl<span class=w> </span>-Ss<span class=w> </span>https://my-netdata.io/kickstart.sh<span class=o>)</span>
</code></pre></div> <p>Cette commande installera la base de Netdata sans toutes les dépendances tel que celle nécessaire au plugin MySQL. Pour installer toutes les dépendances nécessaires :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>bash<span class=w> </span>&lt;<span class=o>(</span>curl<span class=w> </span>-Ss<span class=w> </span>https://my-netdata.io/kickstart.sh<span class=o>)</span><span class=w> </span>all
</code></pre></div> <p>Le paramètre <strong>'--dont-wait</strong> que l'on peut appliquer à la commande permet de s'abstraire de toutes les questions posées à l'utilisateur.</p> <h3 id=installation-de-prometheus>Installation de Prometheus</h3> <h4 id=docker>Docker</h4> <p>Toujours selon les 2 méthodes, via docker run ou docker-compose :</p> <details class=note> <summary>Prometheus : Running with docker</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>-d<span class=w> </span>--name<span class=w> </span>prometheus<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=s1>   -p 9090:9090 &#39;</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>   </span>-v<span class=w> </span>/etc/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml<span class=w> </span><span class=err>&#39;</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>   </span>prom/prometheus<span class=w> </span>--config.file<span class=o>=</span>/etc/prometheus/prometheus.yml
</code></pre></div> </details> <details class=abstract> <summary>docker-compose.yml</summary> <div class=highlight><span class=filename>docker-compose.yml</span><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nt>services</span><span class=p>:</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">prom/prometheus</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">prometheus</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">prometheus</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">9090:9090</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml</span>
</code></pre></div> </details> <div class="admonition warning docker"> <p class=admonition-title>Warning</p> <p>Il faut créer manuellement le fichier prometheus.yml sans quoi par défaut Docker considère qu'il s'agit d'un dossier.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>mkdir<span class=w> </span>/etc/prometheus<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>touch<span class=w> </span>/etc/prometheus/prometheus.yml
</code></pre></div> <h4 id=from-scratch_1>From scratch</h4> <p>Même sur un système récent, le binaire de Prometheus est dans une version archaïque (A l'heure actuelle, version 2.7.1 sur Debian Buster datant de début 2019... soit 1 an et demi de retard). Il conviendra donc de télécharger manuellement et de créer l'unit systemd adéquate pour Prometheus. Sur Ubuntu 20.04, le binaire est récent, cependant, je vous conseille tout de même de l'installer manuellement. Il ne faudra donc pas négliger les mises à jours de prometheus et ne pas oublier qu'elles ne seront pas effectuées via votre gestionnaire de packet.</p> <p>Tout d'abord, rendons-nous sur la <a href=https://prometheus.io/download/ >page officielle</a> pour trouver la dernière version de Prometheus. A l'heure où j'écris, il s'agit de la 2.40.7.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nb>cd</span><span class=w> </span>~<span class=w> </span><span class=p>;</span><span class=w> </span>wget<span class=w> </span>https://github.com/prometheus/prometheus/releases/download/v2.40.7/prometheus-2.40.7.linux-amd64.tar.gz
</code></pre></div> <p>On extrait les fichiers</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>tar<span class=w> </span>xzvf<span class=w> </span>prometheus-2.40.7.linux-amd64.tar.gz
</code></pre></div> <p>On crée notre utilisateur Prometheus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>useradd<span class=w> </span>--no-create-home<span class=w> </span>--shell<span class=w> </span>/bin/false<span class=w> </span>prometheus
</code></pre></div> <p>Puis on déplace les fichiers binaires et de configuration aux endroits prévus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>mkdir<span class=w> </span>/etc/prometheus<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>chown<span class=w> </span>-R<span class=w> </span>prometheus:prometheus<span class=w> </span>/etc/prometheus
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>mv<span class=w> </span>~/prometheus-2-40.7.linux-amd64/<span class=o>{</span>console*,prometheus.yml<span class=o>}</span><span class=w> </span>/etc/prometheus
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>mv<span class=w> </span>~/prometheus-2-40.7.linux-amd64/<span class=o>{</span>prom*,tsdb<span class=o>}</span><span class=w> </span>/usr/bin/
</code></pre></div> <p>Dans nos 2 fichiers exécutables, nous avons bien évidemment Prometheus et un fichier nommé Promtool. Ce dernier nous permettra d'interroger directement Prometheus et d'effectuer des opérations avancées.</p> <p>Et enfin, nous devons faire le fichier de démarrage systemd via le <a href=../../../advanced/systemd/create_unit/ >tutoriel</a> disponible. Une fois le fichier créé, il faut l'activer :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>systemctl<span class=w> </span>daemon-reload<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>systemctl<span class=w> </span><span class=nb>enable</span><span class=w> </span>--now<span class=w> </span>prometheus
</code></pre></div> <h4 id=configuration-de-prometheus>Configuration de Prometheus</h4> <p>Toute la configuration Prometheus se fait via le fichier <code>/etc/prometheus/prometheus.yml</code> en syntaxe YAML. Voici la configuration à appliquer :</p> <!-- markdownlint-disable MD046 --> <details class=abstract> <summary>/etc/prometheus/prometheus.yml</summary> <div class=highlight><span class=filename>prometheus.yml</span><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># my global config</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=nt>global</span><span class=p>:</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w>     </span><span class="l l-Scalar l-Scalar-Plain">5s</span><span class=w> </span><span class=c1># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=nt>evaluation_interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5s</span><span class=w> </span><span class=c1># Evaluate rules every 15 seconds. The default is every 1 minute.</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class=c1># scrape_timeout is set to the global default (10s).</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=c1># Load rules once and periodically evaluate them according to the global evaluation_interval.</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=nt>rule_files</span><span class=p>:</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>  </span><span class=c1># - &quot;first_rules.yml&quot;</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>  </span><span class=c1># - &quot;second_rules.yml&quot;</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=nt>scrape_configs</span><span class=p>:</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>  </span><span class=c1># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span>
<a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>
<a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node SSL</span>
<a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>    </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/api/v1/allmetrics?format=prometheus&amp;source=average</span>
<a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>    </span><span class=nt>honor_labels</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>    </span><span class=c1># If prometheus-node-exporter is installed, grab stats about the local</span>
<a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a><span class=w>    </span><span class=c1># machine by default.</span>
<a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span>
<a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>netdata</span><span class="p p-Indicator">:</span><span class=nv>443</span><span class="p p-Indicator">]</span>
<a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>netdata2</span><span class="p p-Indicator">:</span><span class=nv>443</span><span class="p p-Indicator">]</span>
<a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a>
<a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node</span>
<a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a><span class=w>    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/api/v1/allmetrics?format=prometheus&amp;source=average</span>
<a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a><span class=w>    </span><span class=nt>honor_labels</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a><span class=w>    </span><span class=c1># If prometheus-node-exporter is installed, grab stats about the local</span>
<a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a><span class=w>    </span><span class=c1># machine by default.</span>
<a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span>
<a id=__codelineno-12-32 name=__codelineno-12-32 href=#__codelineno-12-32></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>netdata</span><span class="p p-Indicator">:</span><span class=nv>19999</span><span class="p p-Indicator">]</span>
</code></pre></div> </details> <!-- markdownlint-enable MD046 --> <p>Afin de ne pas copier coller bêtement la configuration, voici une explication succincte du fichier de configuration :</p> <p>Premièrement, nous avons un groupe <strong>global</strong> qui comme son nom l'indique applique les configurations pour tous les jobs. Dedans, nous définissions un temps de scrape toutes les 5 secondes (une minute par défaut) et un reload des règles d'alerting toutes les 5 secondes également.</p> <p>Deuxièmement, nous avons la directive <code>rule_files</code> qui s'occupe de charger des fichiers YAML où nous pouvons définir des règles d'alerting. Cependant, notre alerting de base est géré via netdata. Nous verrons par la suite comment configurer alertmanager</p> <p>Troisièmement, la partie la plus importante, nous avons au premier niveau un <strong>scrape_configs</strong> qui indique la configuration qui sera appliquée par Prometheus. <strong>job_name</strong> nous indique quel nom appliquer au '"groupe'" au niveau de Prometheus.</p> <p>Nous avons 2 jobs : Un concernant les noeuds netdata SSL appelé <em>Node SSL</em> et un autre avec les node normaux appelés <em>Node</em>.</p> <p>Le premier node contient la directive <code>scheme</code> qui nous permet de spécifier que nous souhaitons utiliser une connexion sécurisée TLS pour récupérer les données émises par Netdata. Le second ne contient pas ce keyword car la connexion par défaut est en plain text (http).</p> <p>Ensuite, nous avons une ligne <strong>extrêmement</strong> importante, <code>metrics_path</code>. Celle-ci va de paire avec les targets. En targets de static config, nous définissons chaque hôte dont Prometheus doit récupérer les métriques. <code>metrics_path</code> indique donc sur quelle URI Prometheus doit aller récupérer ses métriques. L'URI est propre à chaque exporter. Ainsi, celle-ci est propre à Netdata et nous indique que nous souhaitons des valeurs moyenne au format Prometheus. Toute la documentation sur ce fichier de configuration est disponible <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/ >ici</a></p> <p>Concernant netdata, il est possible d'afficher directement les valeurs bruts récupérées par prometheus à l'adresse suivante : <a href="https://netdata.user.domain.tld/api/v1/allmetrics%3Fformat=prometheus&average=yes">https://netdata.user.domain.tld/api/v1/allmetrics%3Fformat=prometheus&amp;average=yes</a></p> <p>Deux helpers netdata sont également disponibles. <code>&amp;types=yes</code> permettant d'afficher le type de métrique renvoyé et <code>&amp;help=yes</code> pouvant vous apporter diverses précisions. Voici un exemple :</p> <details class=note> <summary>Example output of prometheus exporter</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># COMMENT netdata_ipv4_tcperrors_packets_persec_average: dimension &quot;RetransSegs&quot;, value is packets/s, gauge, dt 1586642036 to 1586642038 inclusive</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=c1># COMMENT TYPE netdata_ipv4_tcperrors_packets_persec_average gauge</span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=nv>netdata_ipv4_tcperrors_packets_persec_average</span><span class=p>{</span><span class=nl>chart</span><span class=o>=</span><span class=p>&quot;</span><span class=s>ipv4.tcperrors</span><span class=p>&quot;,</span><span class=nl>family</span><span class=o>=</span><span class=p>&quot;</span><span class=s>tcp</span><span class=p>&quot;,</span><span class=nl>dimension</span><span class=o>=</span><span class=p>&quot;</span><span class=s>RetransSegs</span><span class=p>&quot;}</span><span class=w> </span><span class=mf>0.0000000</span><span class=w> </span><span class=mi>1586642038000</span>
</code></pre></div> </details> <p>Il est également possible de récuperer d'autres variables système tel que le nombre de sockets TCP supportés... Il suffira d'ajouter &amp;variables=yes au metrics_path.</p> <p>Selon le panel grafana que vous trouvez, vous pouvez trouver des unités en MB au lieu d'en MiB. Ce comportement a changé en netdata 1.12, pour retrouver les anciennes unités, rajouter &amp;oldunits=yes ) à votre metrics_path.</p> <p>Pour vérifier que tout est conforme, rendez-vous dans l'interface de Prometheus (Par défaut, port 9090), vous devriez tomber sur cette page :</p> <p><img alt=prometheus_1.jpg src=../_img/prometheus_1.jpg></p> <p>On se rend ensuite sur <strong>Status</strong> puis <strong>Target</strong></p> <p><img alt=prometheus_2.jpg src=../_img/prometheus_2.jpg></p> <p>Si tout est bon, vous devriez apercevoir vos différentes targets avec l'état UP.</p> <h4 id=syntaxe-prometheus>Syntaxe Prometheus</h4> <p>Prometheus se base sur une syntaxe intuitive nommée PromQL. Nous pouvons nous exercer à la syntaxe PromQL depuis le menu principal de Prometheus.</p> <p>Il est possible de tester la syntaxe de PromQL depuis la page d'accueil de Prometheus.</p> <p>A côté du bouton <strong>Execute</strong> nous avons // - insert metric at cursor - //. Ceci nous permet de voir toutes les métriques disponibles via Prometheus.</p> <p>Les métriques de Netdata sont également disponibles via l'URL de notre Grafana suivi du chemin de la métrique.</p> <p>Voici un exemple de relevé :</p> <p><img alt=prometheus_3.jpg src=../_img/prometheus_3.jpg></p> <p>Comme vous pouvez le voir, nous obtenons de nombreuses informations (Concrètement, on obtient en réponse tous les netdata que nous monitorons).</p> <p>Décortiquons une réponse type pour un serveur :</p> <details class=note> <summary>Example output of netdata exporter</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>netdata_system_ram_MiB_average<span class=o>{</span><span class=nv>chart</span><span class=o>=</span><span class=s2>&quot;system.ram&quot;</span>,dimension<span class=o>=</span><span class=s2>&quot;free&quot;</span>,family<span class=o>=</span><span class=s2>&quot;ram&quot;</span>,instance<span class=o>=</span><span class=s2>&quot;netdata.x.domain.tld:443&quot;</span>,job<span class=o>=</span><span class=s2>&quot;node&quot;</span><span class=o>}</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>netdata_system_ram_MiB_average<span class=o>{</span><span class=nv>chart</span><span class=o>=</span><span class=s2>&quot;system.ram&quot;</span>,dimension<span class=o>=</span><span class=s2>&quot;used&quot;</span>,family<span class=o>=</span><span class=s2>&quot;ram&quot;</span>,instance<span class=o>=</span><span class=s2>&quot;netdata.x.domain.tld:443&quot;</span>,job<span class=o>=</span><span class=s2>&quot;node&quot;</span><span class=o>}</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>netdata_system_ram_MiB_average<span class=o>{</span><span class=nv>chart</span><span class=o>=</span><span class=s2>&quot;system.ram&quot;</span>,dimension<span class=o>=</span><span class=s2>&quot;cached&quot;</span>,family<span class=o>=</span><span class=s2>&quot;ram&quot;</span>,instance<span class=o>=</span><span class=s2>&quot;netdata.x.domain.tld:443&quot;</span>,job<span class=o>=</span><span class=s2>&quot;node&quot;</span><span class=o>}</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>netdata_system_ram_MiB_average<span class=o>{</span><span class=nv>chart</span><span class=o>=</span><span class=s2>&quot;system.ram&quot;</span>,dimension<span class=o>=</span><span class=s2>&quot;buffers&quot;</span>,family<span class=o>=</span><span class=s2>&quot;ram&quot;</span>,instance<span class=o>=</span><span class=s2>&quot;netdata.x.domain.tld:443&quot;</span>,job<span class=o>=</span><span class=s2>&quot;node&quot;</span><span class=o>}</span>
</code></pre></div> </details> <p>Il existe un <a href=https://awesome-prometheus-alerts.grep.to/rules>site internet</a> proposant quelques règles Prometheus. Attention, celles-ci ne sont pas forcément optimsiées ou fonctionnelles.</p> <p>En premier lieu, nous observons que nous avons 4 métriques différentes pour le même serveur. Ce qui est contenu dans les accolades est une variable pour Prometheus. Par exemple, voici comment obtenir la RAM utilisée pour le serveur ci-dessus :</p> <p><img alt=prometheus_4.jpg src=../_img/prometheus_4.jpg></p> <p>Comme nous pouvons le voir, nous nous sommes servis des variables de Prometheus pour filtrer ce que nous voulons. Nous pouvons également nous servir de ces variables pour obtenir des graphiques dynamiques sur Grafana.</p> <h3 id=installation-de-grafana>Installation de Grafana</h3> <h4 id=docker_1>Docker</h4> <details class=note> <summary>Grafana : Running with docker</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>-d<span class=w> </span>--name<span class=w> </span>prometheus<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=s1>   -p 3000:3000 &#39;</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>   </span>grafana/grafana
</code></pre></div> </details> <details class=abstract> <summary>docker-compose.yml</summary> <div class=highlight><span class=filename>docker-compose.yml</span><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;3&quot;</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=nt>services</span><span class=p>:</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span><span class=nt>grafana</span><span class=p>:</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">grafana</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">grafana</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">grafana/grafana</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3000:3000</span>
</code></pre></div> </details> <h4 id=from-scratch_2>From scratch</h4> <p>Grafana n'étant toujours pas disponible dans les dépôts de Debian 10, nous devons donc ajouter ses propres dépôts avant de pouvoir l'installer :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>sudo<span class=w> </span>apt-get<span class=w> </span>install<span class=w> </span>-y<span class=w> </span>apt-transport-https
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;deb https://packages.grafana.com/oss/deb stable main&quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sudo<span class=w> </span>tee<span class=w> </span>-a<span class=w> </span>/etc/apt/sources.list.d/grafana.list
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>wget<span class=w> </span>-q<span class=w> </span>-O<span class=w> </span>-<span class=w> </span>https://packages.grafana.com/gpg.key<span class=w> </span><span class=p>|</span><span class=w> </span>sudo<span class=w> </span>apt-key<span class=w> </span>add<span class=w> </span>-
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>apt<span class=w> </span>update<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>apt<span class=w> </span>install<span class=w> </span>-y<span class=w> </span>grafana
</code></pre></div> <p>Une fois installé, Grafana n'est pas démarré et n'est pas lancé au démarrage de votre serveur. Pour cela voici les commandes :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>systemctl<span class=w> </span>daemon-reload
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>systemctl<span class=w> </span><span class=nb>enable</span><span class=w> </span>--now<span class=w> </span>grafana-server.service
</code></pre></div> <h3 id=utiliser-prometheus-en-datasource>Utiliser Prometheus en Datasource</h3> <p>Une fois toute la stack installée, nous devons configurer Grafana afin qu'il utilise Prometheus comme source de données. Par défaut, Grafana écoute sur le port <strong>3030</strong> et ses identifiants par défauts sont <strong>admin</strong> / <strong>admin</strong>.</p> <p><img alt=grafana_datasources_1.jpeg src=../_img/grafana_datasources_1.jpeg></p> <p>Il faut alors cliquer sur <em>Add Data Sources</em> :</p> <p><img alt=grafana_datasources_2.jpeg src=../_img/grafana_datasources_2.jpeg></p> <p>Dans le choix de la Data Source, nous choisissons bien évidemment <strong>Prometheus</strong> :</p> <p><img alt=grafana_datasources_3.jpeg src=../_img/grafana_datasources_3.jpeg></p> <p>Ici, les choses se corsent un tout petit peu.</p> <p>Tout d'abord, en URL, 3 cas sont possibles :</p> <ul> <li>Si vous avez installé Prometheus et Grafana sur le même serveur, alors vous pouvez pointer directement vers Prometheus : <a href=http://localhost:9090>http://localhost:9090</a></li> <li>Si votre Prometheus n'est pas sur le serveur de Grafana, alors il vous faudra y accéder via son IP : <a href=http://ip:port>http://ip:port</a></li> <li>S'il est derrière un reverse-proxy (la solution optimale), alors il faudra y accéder de la manière suivante : <a href=https://domain.tld>https://domain.tld</a></li> </ul> <p>Une fois ceci fait, <strong>Save &amp; Test</strong></p> <p>Si tout est correct, voici le message que vous obtiendrez :</p> <p><img alt=grafana_datasources_4.jpeg src=../_img/grafana_datasources_4.jpeg></p> <p>Félicitations, une étape fastidieuse est passée, cependant, le plus dur reste à faire, la création de votre premier panel !</p> <h3 id=creation-de-son-premier-panel>Création de son premier panel</h3> <p>Créer son panel Grafana peut s'avérer fastidieux. De nombreuses options sont possibles. Pour vous faciliter sa prise en main, Grafana vous mets à disposition une <a href=https://play.grafana.org/ >instance test</a>. Malheureusement, la syntaxe utilisée pour l'instance est du InfluxQL et non du PromQL</p> <p>Grafana est un système extrêmement personnalisable, c'est pour cela que je vais vous partager mes panels.</p> <h4 id=mes-panels-grafana>Mes panels Grafana</h4> <p><img alt=Netdata src=../_img/simple_netdata.png></p> <p><em>Lien de téléchargement : <a href="https://files.jdelgado.fr/r/7JCI5fpv#nprlBuA4F3Dnt9qbXbrFBjMtQNuoQNPixGDr8SCjvcc=">ici</a></em></p> <p><img alt="Docker dashboard" src=../_img/docker_dashboard.png></p> <p><em>Lien de téléchargement : <a href="https://files.jdelgado.fr/r/UEeLrP_8#9BJttU2EqJZa9aNXrrHzGTKi4UPooRnvu6VuzzsDQA0=">ici</a></em></p> <p><img alt="Full Dashboard" src=../_img/full_dashboard.png></p> <p><em>Lien de téléchargement : <a href="https://files.jdelgado.fr/r/U4KCGryY#JDkX10832wvNJvRMOh/C3nPJ+dwDT/pD67XwbofHSuc=">ici</a></em></p> <p>La communauté Grafana met à votre disposition énormement de <a href=https://grafana.com/grafana/dashboards/ >dashboards</a></p> <h2 id=trucs-astuces>Trucs &amp; Astuces</h2> <h3 id=grafana_1>Grafana</h3> <p>L'utilisation de Grafana est assez simple. Cependant, certaines choses sont assez mal conçues, il faut les découvrir par soi-même. Je mettrai cette partie à jour au fur et à mesure de mes découvertes.</p> <h4 id=lecture-dun-timestamp>Lecture d'un timestamp</h4> <p>Pour lire une métrique de type Unix Timestamp, également appelé Epoch (nombre de secondes écoulées depuis le 1er Janvier 1970), il faut multiplier par 1000 la valeur et lui appliquer n'importe quel filtre de type Date. En effet, comme me l'a expliqué <a href="https://www.linkedin.com/feed/update/urn:li:activity:6654332320104882176/?commentUrn=urn%3Ali%3Acomment%3A%28activity%3A6654332320104882176%2C6654415986990555137%29">Olivier</a> sur LinkedIn, il s'agit d'une interface écrit en JavaScript. Le timestamp renvoyé par prometheus est en seconde et celui de JS est exprimé en millisecondes, c'est pour cela qu'il faut multiplier par 1000.</p> <h3 id=prometheus_2>Prometheus</h3> <p>Pour apporter une sécurité supplémentaire, il faut faire écouter Prometheus sur localhost uniquement. Pour cela, dans votre unit systemd, il faudra rajouter l'argument <code>--web.listen-address="127.0.0.1:9090"</code> sans oublier de relancer le service Prometheus ainsi que de faire le reverse-proxy adéquate.</p> <p>Pour vérifier que notre modification a bien été prise en compte, il suffit de faire un <em>ss -laptn sport eq 9090</em> et de constater que la Local Address est bien 127.0.0.1.</p> <p>Si votre instance Prometheus n'est pas sur le même serveur et que Grafana/Prometheus ne sont pas joignables via un réseau privé, alors il vous faudra un reverse-proxy avec authentification basic</p> <p>Petit reverse proxy pour Prometheus, à adapter pour votre setup :</p> <!-- markdownlint-disable MD046 --> <details class=abstract> <summary>nginx-prometheus.conf</summary> <div class=highlight><span class=filename>nginx-prometheus.conf</span><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=k>upstream</span><span class=w> </span><span class=s>prometheus</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>    </span><span class=kn>server</span><span class=w> </span><span class=n>localhost</span><span class=p>:</span><span class=mi>9090</span><span class=p>;</span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=p>}</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=k>server</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=kn>listen</span><span class=w>        </span><span class=mi>80</span><span class=p>;</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>    </span><span class=kn>listen</span><span class=w>              </span><span class=s>[::]:80</span><span class=p>;</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>    </span><span class=kn>server_name</span><span class=w>        </span><span class=s>prometheus.domain.tld</span><span class=p>;</span>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>    </span><span class=kn>access_log</span><span class=w>        </span><span class=no>off</span><span class=p>;</span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>    </span><span class=kn>include</span><span class=w>        </span><span class=s>snippets/letsencrypt.conf</span><span class=p>;</span>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>    </span><span class=kn>location</span><span class=w> </span><span class=s>/</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=w>        </span><span class=kn>return</span><span class=w> </span><span class=mi>301</span><span class=w> </span><span class=s>https://prometheus.domain.tld</span><span class=nv>$request_uri</span><span class=p>;</span>
<a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=p>}</span>
<a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a>
<a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=k>server</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a><span class=w>    </span><span class=kn>server_name</span><span class=w> </span><span class=s>prometheus.domain.tld</span><span class=p>;</span>
<a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a>
<a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a><span class=w>    </span><span class=kn>auth_basic</span><span class=w>           </span><span class=s>&quot;prometheus&quot;</span><span class=p>;</span>
<a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a><span class=w>    </span><span class=kn>auth_basic_user_file</span><span class=w> </span><span class=s>/etc/nginx/.htpasswd</span><span class=p>;</span>
<a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a>
<a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a><span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=mi>443</span><span class=w> </span><span class=s>ssl</span><span class=p>;</span>
<a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a><span class=w>    </span><span class=kn>listen</span><span class=w> </span><span class=s>[::]:443</span><span class=w> </span><span class=s>ssl</span><span class=p>;</span>
<a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a><span class=w>    </span><span class=kn>http2</span><span class=w> </span><span class=no>on</span><span class=p>;</span>
<a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a>
<a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a><span class=w>    </span><span class=kn>ssl_certificate</span><span class=w> </span><span class=s>/root/.acme.sh/prometheus.domain.tld_ecc/fullchain.cer</span><span class=p>;</span>
<a id=__codelineno-19-31 name=__codelineno-19-31 href=#__codelineno-19-31></a><span class=w>    </span><span class=kn>ssl_certificate_key</span><span class=w> </span><span class=s>/root/.acme.sh/prometheus.domain.tld_ecc/prometheus.domain.tld.key</span><span class=p>;</span>
<a id=__codelineno-19-32 name=__codelineno-19-32 href=#__codelineno-19-32></a>
<a id=__codelineno-19-33 name=__codelineno-19-33 href=#__codelineno-19-33></a><span class=w>    </span><span class=kn>location</span><span class=w> </span><span class=s>/</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-19-34 name=__codelineno-19-34 href=#__codelineno-19-34></a><span class=w>        </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>Host</span><span class=w> </span><span class=nv>$http_host</span><span class=p>;</span>
<a id=__codelineno-19-35 name=__codelineno-19-35 href=#__codelineno-19-35></a><span class=w>        </span><span class=kn>proxy_pass</span><span class=w> </span><span class=s>http://prometheus</span><span class=p>;</span>
<a id=__codelineno-19-36 name=__codelineno-19-36 href=#__codelineno-19-36></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-19-37 name=__codelineno-19-37 href=#__codelineno-19-37></a><span class=p>}</span>
</code></pre></div> </details> <!-- markdownlint-enable MD046 --> <h3 id=netdata_2>Netdata</h3> <h4 id=general>Général</h4> <p>Comme dit précédemment, Netdata permet nativement d'exporter de nombreuses métriques. Cependant, pour certaines d'entre elles, dont MySQL, il est nécessaire de faire une manipulation :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>netdata</span><span class=o>@</span><span class=n>localhost</span><span class=p>;</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>GRANT</span><span class=w> </span><span class=k>USAGE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>netdata</span><span class=o>@</span><span class=n>localhost</span><span class=p>;</span>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=n>FLUSH</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>;</span>
</code></pre></div> <p>Il faut également avoir installé netdata avec <strong>toutes</strong> ses dépendances via la commande d'installation.</p> <h4 id=docker_2>Docker</h4> <h5 id=resolution-des-noms-des-containers>Résolution des noms des containers</h5> <p>Pour résoudre les noms des containers dockers afin de ne pas avoir une suite de chiffres et lettres incompréhensible, plusieurs méthodes s'offrent à nous.</p> <p>Tout d'abord, nous pouvons exposer l'API Docker via un autre container afin de contrôler complètement son comportement :</p> <details class=abstract> <summary>docker-compose.yml</summary> <div class=highlight><span class=filename>docker-compose.yml</span><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=nt>services</span><span class=p>:</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span><span class=nt>netdata</span><span class=p>:</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">netdata/netdata</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=c1># ... votre config ... #</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DOCKER_HOST=proxy:2375</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>  </span><span class=nt>proxy</span><span class=p>:</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tecnativa/docker-socket-proxy</span>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>     </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CONTAINERS=1</span>
</code></pre></div> </details> <p>La variable d'environnement <em>CONTAINERS=1</em> nous permet d'indiquer à Netdata qu'il n'a accès qu'à la partie de l'API concernant les containers, ce qui peut être très utile en cas de compromission du container.</p> <p>La seconde manière de faire est d'indiquer à Netdata de s'exécuter en tant que groupe Docker, pour cela, un simple <code>grep docker /etc/group '| cut -d ':' -f 3</code> nous permet de récupérer le groupe docker (généralement 999 avant Debian 10 et 998 avec Debian 10) et nous ajoutons la variable d'environnement PGID=998 à notre container netdata.</p> <p>Enfin, troisième et dernière possibilité que je déconseille <strong>fortement</strong> est de lancer Netdata en tant qu'utilisateur root via la variable d'environnement <em>DOCKER_USR=root</em> sur notre container.</p> <h5 id=monitoring-dun-mountpoint-personnalise>Monitoring d'un mountpoint personnalisé</h5> <p>Pour monitorer les I/O, espace disque... d'un point de montage, il faut bien évidemment l'indiquer en volume sur votre container Netdata.</p> <p>Prenons un exemple simple. Si vous avez différents utilisateurs dans votre /home (jeremy, augustin...) alors il faudra faudra ajouter le volume /home à votre container.</p> <p>La base d'une stack de monitoring est désormais acquise.</p> <h2 id=pour-aller-plus-loin>Pour aller plus loin</h2> <p>Il s'agit d'une stack très simple à mettre en place. Cependant, celle-ci n'est pas parfaite, nous n'avons aucune indication concernant nos sites web, l'état des certificats SSL, ou encore aucun alerting.</p> <h2 id=rendre-prometheus-dynamique>Rendre Prometheus dynamique</h2> <p>Actuellement, nous avons une configuration statique, ce qui implique un redémarrage de prometheus à chaque ajout/suppression d'un host. Le redémarrage de prometheus peut durer plusieurs minutes avec la reprise des WAL...</p> <p>A la place de static_configs, il est donc possible d'utiliser d'autres directives, dont <em>file_sd_configs</em>. Votre configuration prometheus sera donc dynamique via un simple fichier json que prometheus relira à chaque modification, qu'il s'agisse d'une suppression ou d'un ajout.</p> <p>Remplacer le bloc node de votre fichier prometheus.yml par le suivant :</p> <details class=abstract> <summary>/etc/prometheus/prometheus.yml</summary> <div class=highlight><span class=filename>prometheus.yml</span><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>    </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/api/v1/allmetrics?format=prometheus&amp;source=average</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class=nt>honor_labels</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=c1># If prometheus-node-exporter is installed, grab stats about the local</span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=c1># machine by default.</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=nt>file_sd_configs</span><span class=p>:</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>files</span><span class=p>:</span>
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;/etc/prometheus/netdata.json&quot;</span>
</code></pre></div> </details> <p>Si vous avez bien suivi notre tutoriel sur la création d'une unit systemd, vous avez compris que nous n'avons pas besoin de spécifier un chemin absolu via la directive WorkingDirectory. Cependant, pour un soucis de clareté, je préfère indiquer un chemin absolu.</p> <p>Comme vous pouvez vous en douter, le fichier <em>netdata.json</em> contiendra les différents nodes à monitorer. Si vous souhaitez ajouter/supprimer un fichier ou un job, il vous faudra évidemment redémarrer Prometheus. Voici le contenu dudit fichier :</p> <details class=abstract> <summary>/etc/prometheus/netdata.json</summary> <div class=highlight><span class=filename>netdata.json</span><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=p>[</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>  </span><span class=p>{</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>    </span><span class=nt>&quot;labels&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>      </span><span class=nt>&quot;jobs&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;node&quot;</span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=w>    </span><span class=nt>&quot;targets&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>      </span><span class=s2>&quot;netdata.x.domain.tld:443&quot;</span><span class=p>,</span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=w>      </span><span class=s2>&quot;netdata.y.domain.tld:443&quot;</span>
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=p>]</span>
</code></pre></div> </details> <p>Ce fichier est simplissime. Nous avons les labels dans un premier bloc puis nos différentes targets. <strong>Attention</strong> à penser aux virgules entre les targets et à ne pas en mettre à votre dernière, sans quoi votre JSON serait invalide.</p> <p>Une fois ceci fait, nous redémarrons une ultime fois Prometheus <em>systemctl restart prometheus</em>, puis nous pourrons modifer à chaud nos targets sans aucune autre modification, plutôt pratique ! D'autres manières sont également possibles pour importer dynamiquement vos targets par exemple via consul. J'ai choisi ce mode-ci car il me convient parfaitement. Xavier Pestel (xavki) nous propose une excellente vidéo pour <a href="https://www.youtube.com/watch?v=18ahxxrpxkg">l'inventaire dynamique</a> via Consul.</p> <h2 id=monitorer-vos-certificats-websites>Monitorer vos certificats &amp; websites</h2> <p>Le monitorer de ces éléments n'est pas proposé nativement par notre exporter Netdata. Heureusement, Prometheus à pensé à tout et nous propose blackbox_exporter, un exporter orienté autour des tests HTTP, ICMP &amp; co. Pour l'installer, nous devons procéder de la même manière que Prometheus. Si vous disposez de Prometheus sur votre machine, il n'y a aucun intérêt à créer un utilisateur supplémentaire, vous pourrez lancer blackbox_exporter en tant que Prometheus et placer son fichier de configuration dans le répertoire de Prometheus.</p> <p>Il faut toujours se rendre sur la page Github afin de s'assurer que nous disposons de la dernière version de notre logiciel :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=nb>cd</span><span class=w> </span>~<span class=w> </span><span class=p>;</span><span class=w> </span>wget<span class=w> </span>https://github.com/prometheus/blackbox_exporter/releases/download/v0.24.0/blackbox_exporter-0.24.0.linux-amd64.tar.gz
</code></pre></div> <p>Et on extrait toujours les fichiers :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>tar<span class=w> </span>xzvf<span class=w> </span>blackbox_exporter-0.24.0.linux-amd64.tar.gz
</code></pre></div> <p>Et on les déplace dans le dossier adéquate. Attention à bien mettre le bon username (prometheus ou celui que vous aurez décidés)</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>mkdir<span class=w> </span>/etc/blackbox<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>chown<span class=w> </span>-R<span class=w> </span>prometheus:prometheus<span class=w> </span>/etc/blackbox
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>mv<span class=w> </span>~/blackbox_exporter-0.24.0.linux-amd64/blackbox_exporter<span class=w> </span>/usr/bin
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>mv<span class=w> </span>~/blackbox_exporter-0.24.0.linux-amd64/blackbox.yml<span class=w> </span>/etc/blackbox
</code></pre></div> <p>Si nous souhaitons utiliser le test ICMP de blackbox et que nous avons lancé blackbox en tant que non-root, alors il nous faudra ajouter une Capability à notre unit.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>$<span class=w> </span>systemctl<span class=w> </span>edit<span class=w> </span>--full<span class=w> </span>blackbox_exporter
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=o>[</span>Service<span class=o>]</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>...
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=nv>AmbientCapabilities</span><span class=o>=</span>CAP_NET_RAW
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>...
</code></pre></div> <p>Nous n'oublions également pas que le paquet puisse effectuer les opérations dont il a besoin :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>$<span class=w> </span>getcap<span class=w> </span>/usr/bin/prometheus-blackbox-exporter
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>/usr/bin/prometheus-blackbox-exporter<span class=w> </span><span class=nv>cap_net_raw</span><span class=o>=</span>ep
</code></pre></div> <p>Sans quoi, nous recevrons une erreur selon laquelle nous n'avons pas la permission d'effectuer cette action :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>    ts=2020-04-06T01:59:18.302197375Z caller=main.go:119 module=icmp target=netdata.pierre.x.eu level=error msg=&quot;Error listening to socket&quot; err=&quot;listen ip4:icmp 0.0.0.0: socket: operation not permitted&quot;
</code></pre></div> <p>Les tests écrits par défaut par les mainteneurs de Blackbox nous conviendront pour faire de simples tests de chargement de page web ainsi que d'ICMP, nous ne toucherons donc pas à ce fichier.</p> <p>Maintenant que Blackbox est correctement installé, nous devons indiquer à Prometheus d'aller récupérer les métriques de Blackbox :</p> <details class=abstract> <summary>Target for prometheus.yml</summary> <div class=highlight><span class=filename>prometheus.yml</span><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">HTTP</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=w>  </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=w>  </span><span class=nt>params</span><span class=p>:</span>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=w>    </span><span class=nt>module</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>http_2xx</span><span class="p p-Indicator">]</span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=w>  </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/probe</span>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>  </span><span class=nt>file_sd_configs</span><span class=p>:</span>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>files</span><span class=p>:</span>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http.json</span>
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=w>  </span><span class=nt>relabel_configs</span><span class=p>:</span>
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>__address__</span><span class="p p-Indicator">]</span>
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=w>    </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">__param_target</span>
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>__param_target</span><span class="p p-Indicator">]</span>
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=w>    </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">instance</span>
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">__address__</span>
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=w>    </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">localhost:9115</span><span class=w> </span><span class=c1># Blackbox exporter.</span>
</code></pre></div> </details> <p>Ce job diffère un tout petit peu des anciens, tout d'abord, nous devons spécifier un module correspondant au nom de notre module dans <em>blackbox.yml</em>. Nous avons besoin de passer la destination de notre test à Blackbox. Pour cela, nous utilisons le module relabel_configs de Prometheus. Enfin, nous réécrivons la variable address avec la valeur de notre exporter Blackbox, dans notre cas, <em>localhost:9115</em>. Voici le contenu de notre fichier <em>http.json</em></p> <details class=abstract> <summary>/etc/prometheus/http.json</summary> <div class=highlight><span class=filename>http.json</span><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=p>[</span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>  </span><span class=p>{</span>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>    </span><span class=nt>&quot;labels&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>      </span><span class=nt>&quot;job&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;blackbox&quot;</span>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=w>    </span><span class=nt>&quot;targets&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=w>      </span><span class=s2>&quot;https://netdata.jean.domain.tld:443&quot;</span><span class=p>,</span>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=w>      </span><span class=s2>&quot;https://netdata.peuplu.domain.tld:443&quot;</span>
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=p>]</span>
</code></pre></div> </details> <p>Une fois cette étape faite et Prometheus redémarré, nous avons accès de nouvelles métriques sur Prometheus (en fonction du module choisi, il s'agit ici des métriques pour le module http_2xx) :</p> <details class=note> <summary>Output of blackbox_exporter / http_2xx</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class="l l-Scalar l-Scalar-Plain">probe_dns_lookup_time_seconds 0.001002382</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class="l l-Scalar l-Scalar-Plain">probe_duration_seconds 0.102398015</span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class="l l-Scalar l-Scalar-Plain">probe_failed_due_to_regex 0</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class="l l-Scalar l-Scalar-Plain">probe_http_content_length 89715</span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class="l l-Scalar l-Scalar-Plain">probe_http_duration_seconds{phase=&quot;connect&quot;} 0.022205535</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class="l l-Scalar l-Scalar-Plain">probe_http_duration_seconds{phase=&quot;processing&quot;} 0.022529847</span>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class="l l-Scalar l-Scalar-Plain">probe_http_duration_seconds{phase=&quot;resolve&quot;} 0.006274033</span>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class="l l-Scalar l-Scalar-Plain">probe_http_duration_seconds{phase=&quot;tls&quot;} 0.038470116</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class="l l-Scalar l-Scalar-Plain">probe_http_duration_seconds{phase=&quot;transfer&quot;} 0.021751707</span>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class="l l-Scalar l-Scalar-Plain">probe_http_redirects 1</span>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class="l l-Scalar l-Scalar-Plain">probe_http_ssl 1</span>
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class="l l-Scalar l-Scalar-Plain">probe_http_status_code 200</span>
<a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a><span class="l l-Scalar l-Scalar-Plain">probe_http_uncompressed_body_length 89715</span>
<a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class="l l-Scalar l-Scalar-Plain">probe_http_version 1.1</span>
<a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class="l l-Scalar l-Scalar-Plain">probe_ip_protocol 4</span>
<a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class="l l-Scalar l-Scalar-Plain">probe_ssl_earliest_cert_expiry 1.59282791e+09</span>
<a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class="l l-Scalar l-Scalar-Plain">probe_success 1</span>
<a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a><span class="l l-Scalar l-Scalar-Plain">probe_tls_version_info{version=&quot;TLS 1.3&quot;} 1</span>
</code></pre></div> </details> <p>Comme vous pouvez le voir, nous avons de nombreuses métriques, particulièrement 2 plus utiles que les autres :</p> <ul> <li><code>probe_success</code> nous indique si le test s'est effectué correctement</li> <li><code>probe_http_status_code</code> nous renvoie le code de retour de la page</li> <li><code>probe_ssl_earliest_cert_expiry</code> nous renvoie la date d'expiration (sous forme de timestamp)</li> </ul> <p>Grace à ces nouvelles métriques, vous pouvez indiquer l'état de services dans vos dashboards Grafana, la date d'expiration de vos certificats... Un autre exporter s'occupant uniquement de la partie SSL/TLS, mais fournissant plus de verbosité est disponible. Il se nomme <a href=https://github.com/amimof/node-cert-exporter>node-cert-exporter</a>, je lui préfère blackbox_exporter car il est plus polyvalent et supervise une URL, non un chemin vers un certificat. Cependant, celui-ci peut être intéressant dans le cas de supervision de certificats pour des systèmes comme Kubernetes ou autre.</p> <h2 id=integration-dun-systeme-dalerting>Intégration d'un système d'alerting</h2> <h3 id=alertmanager>Alertmanager</h3> <p>Alertmanager est la brique d'alerting de notre stack, celle-ci se greffe directement à prometheus. La procédure d'installation reste la même que tous les autres produits créés par Prometheus :</p> <p>Rendons-nous sur la <a href=https://prometheus.io/download/ >page officielle</a> pour trouver la dernière version de alermanager . A l'heure où j'écris, il s'agit de la 0.20.0.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=nb>cd</span><span class=w> </span>~<span class=w> </span><span class=p>;</span><span class=w> </span>wget<span class=w> </span>https://github.com/prometheus/alertmanager/releases/download/v0.25.0/alertmanager-0.25.0.linux-amd64.tar.gz
</code></pre></div> <p>On extrait les fichiers</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>tar<span class=w> </span>xzvf<span class=w> </span>alertmanager-0.25.0.linux-amd64.tar.gz
</code></pre></div> <p>cette archive contient, comme les autres, des exécutables et un fichier de configuration, nous les déplaçons dans le répertoire adéquat. Encore une fois, si nous avons déjà Prometheus, nous mettrons le fichier de configuration dans ce répertoire, sinon, nous créerons le répertoire <strong>/etc/alertmanager</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a>mv<span class=w> </span>~/alertmanager-0.25.0.linux-amd64/<span class=o>{</span>amtool,alertmanager<span class=o>}</span><span class=w> </span>/usr/bin/
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>mv<span class=w> </span>~/alertmanager-0.25.0.linux-amd64/alertmanager.yml<span class=w> </span>/etc/alertmanager
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>chown<span class=w> </span>-R<span class=w> </span>prometheus:prometheus<span class=w> </span>/etc/alertmanager
</code></pre></div> <p>Pour créer l'unit, je vous renvoie une nouvelle fois vers le <a href=../../../advanced/systemd/create_unit/ >tutoriel adéquat</a>. Amtool est un outil permettant d'interagir directement avec l'API de AlertManager.</p> <h4 id=alertmanageryml>alertmanager.yml</h4> <p>Voici le contenu par défaut du fichier alertmanager.yml :</p> <!-- markdownlint-disable MD046 --> <details class=abstract> <summary>/etc/prometheus/alertmanager.yml</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=nt>global</span><span class=p>:</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>  </span><span class=nt>resolve_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5m</span>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=nt>route</span><span class=p>:</span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>alertname</span><span class="p p-Indicator">]</span>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">web.hook</span>
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=nt>receivers</span><span class=p>:</span>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">web.hook</span>
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span>
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://127.0.0.1:5001/</span>
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a><span class=nt>inhibit_rules</span><span class=p>:</span>
<a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source_match</span><span class=p>:</span>
<a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">critical</span>
<a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a><span class=w>    </span><span class=nt>target_match</span><span class=p>:</span>
<a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">warning</span>
<a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a><span class=w>    </span><span class=nt>equal</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>alertname</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>dev</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>instance</span><span class="p p-Indicator">]</span>
</code></pre></div> </details> <!-- markdownlint-enable MD046 --> <p>Nous voyons ici une directive <code>route</code> qui nous indique comment chaque alerte sera traitée par alertmanager, nous pouvons faire plusieurs directives route si nous souhaitons des traitements spécifiques. Chaque route est définie par un receiver unique.</p> <p>Tout d'abord, la directive <code>group_by</code>. Celle-ci prend un tableau en paramètre. Par défaut, il contient <code>alert</code> et <code>instance</code> ce qui nous indique que les alertes contenant ces tags seront traitées de la même manière. Nous n'utilisons qu'une route et souhaitons obtenir toutes les alertes, nous utilisons donc le tag <em>alertname</em>.</p> <p>Ensuite, <em>group_wait</em> est ici défini à 10 secondes. Il s'agit du nombre de secondes avant qu'une alerte d'un nouveau groupe soit envoyé si vous disposez de plusieurs groupes. Comme nous ne disposons que d'un seul groupe, il s'agit d'une valeur arbitraire ici définie à 10s.</p> <p><code>group_interval</code> est défini à 10s ce qui signifie que les autres notifications concernant le même groupe arriverons toutes les 10s.</p> <p>La variable <code>repeat_interval</code> est le délai à attendre si les alertes que nous avons eu ne sont toujours pas résolues. Ll s'agit encore d'une valeur arbitraire que nous définissons à une heure.</p> <p>De nombreux receivers sont possibles, adresse mail, slack, webhook... Dans mon cas, j'ai choisi d'utiliser un Webhook qui va s'occuper d'envoyer mes notifications sur Telegram. Ce webhook écoutera donc sur le port 8080 et non sur le 5001, il s'agit ici de la dernière valeur à modifier. Pour plus d'informations, je vous invite à aller voir <a href=https://github.com/prometheus/alertmanager/blob/master/doc/examples/simple.yml>l'exemple officiel</a> d'alertmanager.</p> <h4 id=modifications-du-fichier-prometheusyml>Modifications du fichier prometheus.yml</h4> <p>Faisons un petit point sur ce à quoi ressemble notre <code>prometheys.yml</code> à ce stade-là. Nous voyons une partie concernant les règles (rule_files) mais nous n'y avons pas touché. Nous allons donc charger notre première règle. De plus, il faudra indiquer à Prometheus de renvoyer ses alertes à alertmanager.</p> <details class=abstract> <summary>/etc/prometheus/prometheus.yml</summary> <div class=highlight><span class=filename>prometheus.yml</span><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class="p p-Indicator">[</span><span class=nv>...</span><span class="p p-Indicator">]</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=nt>rule_files</span><span class=p>:</span>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;alert.rules.yml&quot;</span>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class="p p-Indicator">[</span><span class=nv>...</span><span class="p p-Indicator">]</span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=nt>alerting</span><span class=p>:</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=w>  </span><span class=nt>alertmanagers</span><span class=p>:</span>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>static_configs</span><span class=p>:</span>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>targets</span><span class=p>:</span>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:9093</span>
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class="p p-Indicator">[</span><span class=nv>...</span><span class="p p-Indicator">]</span>
</code></pre></div> </details> <p>Nous indiquons ici à Prometheus d'utiliser comme règles le contenu du fichier <code>alert.rules.yml</code> mais également d'envoyer les alertes vers la target de type alertmanager disponible sur 127.0.0.1:9093.</p> <h4 id=alertrulesyml>alert.rules.yml</h4> <details class=abstract> <summary>/etc/prometheus/alert.rules.json</summary> <div class=highlight><span class=filename>alert.rules.json</span><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=nt>groups</span><span class=p>:</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alert.rules</span>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>  </span><span class=nt>rules</span><span class=p>:</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">EndpointDown</span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">probe_success == 0</span>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=w>    </span><span class=nt>labels</span><span class=p>:</span>
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=s>&quot;critical&quot;</span>
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Endpoint</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>an</span><span class=nv> </span><span class=s>issue&quot;</span>
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>job</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.job</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>been</span><span class=nv> </span><span class=s>down</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>more</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>10</span><span class=nv> </span><span class=s>seconds.&quot;</span>
</code></pre></div> </details> <p>La syntaxe est assez compréhensible. Tout d'abord, nous définissons un nom au groupe de règles puis nous définissons la règle. Celle-ci va se nommer <em>EndpointDown</em>. L'expression ici <em>probe_success == 0</em> (métrique renvoyée blackbox_exporter) vérifie si l'URL monitorée par blackbox_exporter est up ou down pendant 10 secondes. Les variables définies dans l'annotations sont définies par Prometheus.</p> <p>Pour vérifier que notre règle est bien prise en place, nous ferons la commande suivante :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>$<span class=w> </span>promtool<span class=w> </span>check<span class=w> </span>rules<span class=w> </span>/etc/prometheus/alert.rules.yml
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>Checking<span class=w> </span>/etc/prometheus/alert.rules.yml
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=w>  </span>SUCCESS:<span class=w> </span><span class=m>1</span><span class=w> </span>rules<span class=w> </span>found
</code></pre></div> <p>Voici d'autres exemples de règles Prometheus trouvées sur le web :</p> <!-- markdownlint-disable MD046 --> <details class=abstract> <summary>/etc/prometheus/alert.rules.yml</summary> <div class=highlight><span class=filename>alert.rules.yml</span><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=nt>groups</span><span class=p>:</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">alert.rules</span>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=w>  </span><span class=nt>rules</span><span class=p>:</span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node_high_cpu_usage_70</span>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">avg(rate(netdata_cpu_cpu_percentage_average{dimension=&quot;idle&quot;}[1m])) by (job) &gt; 70</span>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1m</span>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$labels.job</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">on {{ $labels.job }} CPU usage is at {{ humanize $value }}%.</span>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CPU alert for container node {{ $labels.job }}</span>
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node_high_memory_usage_70</span>
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100 / sum(netdata_system_ram_MB_average) by (job)</span>
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a><span class=w>      </span><span class="l l-Scalar l-Scalar-Plain">* sum(netdata_system_ram_MiB_average{dimension=~&quot;free|cached&quot;}) by (job) &lt; 30</span>
<a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1m</span>
<a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$labels.job</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">memory usage is {{ humanize $value}}%.</span>
<a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Memory alert for container node {{ $labels.job }}</span>
<a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>
<a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node_low_root_filesystem_space_20</span>
<a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100 / sum(netdata_disk_space_GiB_average{family=&quot;/&quot;}) by (job)</span>
<a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a><span class=w>      </span><span class="l l-Scalar l-Scalar-Plain">* sum(netdata_disk_space_GB_average{family=&quot;/&quot;,dimension=~&quot;avail|cached&quot;}) by (job) &lt; 20</span>
<a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1m</span>
<a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>$labels.job</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root filesystem space is {{ humanize $value}}%.</span>
<a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Root filesystem alert for container node {{ $labels.job }}</span>
<a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>
<a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node_root_filesystem_fill_rate_6h</span>
<a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">predict_linear(netdata_disk_space_GiB_average{family=&quot;/&quot;,dimension=~&quot;avail|cached&quot;}[1h], 6 * 3600) &lt; 0</span>
<a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
<a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a><span class=w>    </span><span class=nt>labels</span><span class=p>:</span>
<a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">critical</span>
<a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Container node {{ $labels.job }} root filesystem is going to fill up in 6h.</span>
<a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Disk fill alert for node {{ $labels.job }}</span>
</code></pre></div> </details> <!-- markdownlint-enable MD046 --> <p>Enormement d'exemples sont disponibles <a href=https://awesome-prometheus-alerts.grep.to/rules.html>ici</a></p> <h3 id=bot-telegram-alertmanager>Bot Telegram Alertmanager</h3> <p>Pour avoir nos alertes sur Telegram, j'utilise le bot de <a href=https://github.com/metalmatze/alertmanager-bot>metalmatze</a> qui répond juste à nos besoins. Dernière version au jour de l'écriture de cet article : 0.4.3</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=nb>cd</span><span class=w> </span>~<span class=w> </span><span class=p>;</span><span class=w> </span>wget<span class=w> </span>https://github.com/metalmatze/alertmanager-bot/releases/download/0.4.3/alertmanager-bot-0.4.3-linux-amd64
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>mv<span class=w> </span>alertmanager-bot-0.4.3-linux-amd64<span class=w> </span>/usr/bin/alertmanager-bot<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>chmod<span class=w> </span>+x<span class=w> </span>/usr/bin/alertmanager-bot
</code></pre></div> <p>Encore une fois, on n'oublie pas d'écrire l'unit file qui va bien, nous avons l'habitude désormais. Il nous faudra <a href="https://www.teleme.io/articles/create_your_own_telegram_bot?hl=fr">créer un bot telegram</a> et relever notre ChatID.</p> <p>Notre directive <code>ExecStart</code> de notre unit sera la suivante :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=nv>ExecStart</span><span class=o>=</span>alertmanager-bot<span class=w> </span>--store<span class=o>=</span>bolt<span class=w> </span>--telegram.token<span class=o>=</span>BOT_TOKEN<span class=w> </span>--telegram.admin<span class=o>=</span>USER_ID<span class=w> </span>--template.paths<span class=o>=</span>default.tmpl
</code></pre></div> <p>Penser bien à remplacer BOT_TOKEN et USER_ID par les bonnes variables. Quand au template default.tpl, voici celui que j'utilise :</p> <!-- markdownlint-disable MD046 --> <details class=note> <summary>Template alertmanager</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=w>  </span><span class=err>{{/*</span><span class=n>Alertmanager</span><span class=w> </span><span class=n>Silence</span><span class=w> </span><span class=n>link</span><span class=err>*/}}</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>  </span><span class=err>{{</span><span class=w> </span><span class=n>define</span><span class=w> </span><span class=s2>&quot;__alert_silence_link&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>      </span><span class=err>&lt;</span><span class=n>https</span><span class=err>://</span><span class=n>alertmanager</span><span class=p>.</span><span class=n>dynfactory</span><span class=p>.</span><span class=n>com</span><span class=err>/</span><span class=c1>#/silences/new?filter=%7B&gt;</span>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>SortedPairs</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>ne</span><span class=w> </span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=s2>&quot;alertname&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=w>              </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=err>}}%</span><span class=n>3D</span><span class=s2>&quot;{{- .Value | urlquery -}}&quot;</span><span class=err>%</span><span class=n>2C</span><span class=err>%</span><span class=n>20</span>
<a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=w>      </span><span class=n>alertname</span><span class=err>%</span><span class=n>3D</span><span class=s2>&quot;{{- .CommonLabels.alertname -}}&quot;</span><span class=err>%</span><span class=n>7D</span>
<a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a><span class=w>  </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a>
<a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a><span class=w>  </span><span class=err>{{/*</span><span class=w> </span><span class=n>Severity</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>alert</span><span class=w> </span><span class=err>*/}}</span>
<a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=w>  </span><span class=err>{{</span><span class=w> </span><span class=n>define</span><span class=w> </span><span class=s2>&quot;__alert_severity&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>severity</span><span class=w> </span><span class=s2>&quot;critical&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a><span class=w>      </span><span class=err>*</span><span class=n>Severity</span><span class=err>:*</span><span class=w> </span><span class=err>:</span><span class=n>no_entry</span><span class=err>:</span>
<a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>else</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>severity</span><span class=w> </span><span class=s2>&quot;warning&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a><span class=w>      </span><span class=err>*</span><span class=n>Severity</span><span class=err>:*</span><span class=w> </span><span class=err>:</span><span class=n>warning</span><span class=err>:</span>
<a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>else</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>severity</span><span class=w> </span><span class=s2>&quot;info&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a><span class=w>      </span><span class=err>*</span><span class=n>Severity</span><span class=err>:*</span><span class=w> </span><span class=err>:</span><span class=n>information_source</span><span class=err>:</span>
<a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>else</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a><span class=w>      </span><span class=err>*</span><span class=n>Severity</span><span class=err>:*</span><span class=w> </span><span class=err>:</span><span class=n>question</span><span class=err>:</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>severity</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-23 name=__codelineno-43-23 href=#__codelineno-43-23></a><span class=w>  </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-24 name=__codelineno-43-24 href=#__codelineno-43-24></a>
<a id=__codelineno-43-25 name=__codelineno-43-25 href=#__codelineno-43-25></a><span class=w>  </span><span class=err>{{/*</span><span class=w> </span><span class=n>Title</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>Slack</span><span class=w> </span><span class=n>alert</span><span class=w> </span><span class=err>*/}}</span>
<a id=__codelineno-43-26 name=__codelineno-43-26 href=#__codelineno-43-26></a><span class=w>  </span><span class=err>{{</span><span class=w> </span><span class=n>define</span><span class=w> </span><span class=s2>&quot;slack.title&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-27 name=__codelineno-43-27 href=#__codelineno-43-27></a><span class=w>    </span><span class=k>[</span><span class=err>{{</span><span class=w> </span><span class=k>.Status</span><span class=w> </span><span class=err>|</span><span class=w> </span><span class=k>toUpper</span><span class=w> </span><span class=k>-</span><span class=err>}}</span>
<a id=__codelineno-43-28 name=__codelineno-43-28 href=#__codelineno-43-28></a><span class=w>    </span><span class=err>{{</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>Status</span><span class=w> </span><span class=s2>&quot;firing&quot;</span><span class=w> </span><span class=err>}}:{{</span><span class=w> </span><span class=p>.</span><span class=n>Alerts</span><span class=p>.</span><span class=n>Firing</span><span class=w> </span><span class=err>|</span><span class=w> </span><span class=n>len</span><span class=w> </span><span class=err>}}{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-29 name=__codelineno-43-29 href=#__codelineno-43-29></a><span class=w>    </span><span class=err>]</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>alertname</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-30 name=__codelineno-43-30 href=#__codelineno-43-30></a><span class=w>  </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-31 name=__codelineno-43-31 href=#__codelineno-43-31></a>
<a id=__codelineno-43-32 name=__codelineno-43-32 href=#__codelineno-43-32></a>
<a id=__codelineno-43-33 name=__codelineno-43-33 href=#__codelineno-43-33></a><span class=w>  </span><span class=err>{{/*</span><span class=w> </span><span class=n>Color</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>Slack</span><span class=w> </span><span class=n>attachment</span><span class=w> </span><span class=err>(</span><span class=n>appears</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>line</span><span class=w> </span><span class=n>next</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>alert</span><span class=w> </span><span class=err>)*/}}</span>
<a id=__codelineno-43-34 name=__codelineno-43-34 href=#__codelineno-43-34></a><span class=w>  </span><span class=err>{{</span><span class=w> </span><span class=n>define</span><span class=w> </span><span class=s2>&quot;slack.color&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-35 name=__codelineno-43-35 href=#__codelineno-43-35></a><span class=w>      </span><span class=err>{{</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>Status</span><span class=w> </span><span class=s2>&quot;firing&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-36 name=__codelineno-43-36 href=#__codelineno-43-36></a><span class=w>          </span><span class=err>{{</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>severity</span><span class=w> </span><span class=s2>&quot;warning&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-37 name=__codelineno-43-37 href=#__codelineno-43-37></a><span class=w>              </span><span class=n>warning</span>
<a id=__codelineno-43-38 name=__codelineno-43-38 href=#__codelineno-43-38></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>else</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=p>.</span><span class=n>CommonLabels</span><span class=p>.</span><span class=n>severity</span><span class=w> </span><span class=s2>&quot;critical&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-39 name=__codelineno-43-39 href=#__codelineno-43-39></a><span class=w>              </span><span class=n>danger</span>
<a id=__codelineno-43-40 name=__codelineno-43-40 href=#__codelineno-43-40></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>else</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-41 name=__codelineno-43-41 href=#__codelineno-43-41></a><span class=w>              </span><span class=c1>#439FE0</span>
<a id=__codelineno-43-42 name=__codelineno-43-42 href=#__codelineno-43-42></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-43 name=__codelineno-43-43 href=#__codelineno-43-43></a><span class=w>      </span><span class=err>{{</span><span class=w> </span><span class=n>else</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-44 name=__codelineno-43-44 href=#__codelineno-43-44></a><span class=w>      </span><span class=n>good</span>
<a id=__codelineno-43-45 name=__codelineno-43-45 href=#__codelineno-43-45></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-46 name=__codelineno-43-46 href=#__codelineno-43-46></a><span class=w>  </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-47 name=__codelineno-43-47 href=#__codelineno-43-47></a>
<a id=__codelineno-43-48 name=__codelineno-43-48 href=#__codelineno-43-48></a><span class=w>  </span><span class=err>{{/*</span><span class=w> </span><span class=n>The</span><span class=w> </span><span class=n>text</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>display</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>alert</span><span class=w> </span><span class=err>*/}}</span>
<a id=__codelineno-43-49 name=__codelineno-43-49 href=#__codelineno-43-49></a><span class=w>  </span><span class=err>{{</span><span class=w> </span><span class=n>define</span><span class=w> </span><span class=s2>&quot;slack.text&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-50 name=__codelineno-43-50 href=#__codelineno-43-50></a>
<a id=__codelineno-43-51 name=__codelineno-43-51 href=#__codelineno-43-51></a><span class=w>      </span><span class=err>{{</span><span class=w> </span><span class=n>template</span><span class=w> </span><span class=s2>&quot;__alert_severity&quot;</span><span class=w> </span><span class=p>.</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-52 name=__codelineno-43-52 href=#__codelineno-43-52></a>
<a id=__codelineno-43-53 name=__codelineno-43-53 href=#__codelineno-43-53></a><span class=w>      </span><span class=err>{{</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=p>.</span><span class=n>Alerts</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-54 name=__codelineno-43-54 href=#__codelineno-43-54></a>
<a id=__codelineno-43-55 name=__codelineno-43-55 href=#__codelineno-43-55></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=p>.</span><span class=n>Annotations</span><span class=p>.</span><span class=n>summary</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-56 name=__codelineno-43-56 href=#__codelineno-43-56></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-57 name=__codelineno-43-57 href=#__codelineno-43-57></a><span class=w>          </span><span class=err>*</span><span class=n>Summary</span><span class=err>:*</span><span class=w> </span><span class=err>{{</span><span class=w> </span><span class=p>.</span><span class=n>Annotations</span><span class=p>.</span><span class=n>summary</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-58 name=__codelineno-43-58 href=#__codelineno-43-58></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-59 name=__codelineno-43-59 href=#__codelineno-43-59></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-60 name=__codelineno-43-60 href=#__codelineno-43-60></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=p>.</span><span class=n>Annotations</span><span class=p>.</span><span class=n>description</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-61 name=__codelineno-43-61 href=#__codelineno-43-61></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-62 name=__codelineno-43-62 href=#__codelineno-43-62></a><span class=w>          </span><span class=err>{{</span><span class=w> </span><span class=p>.</span><span class=n>Annotations</span><span class=p>.</span><span class=n>description</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-63 name=__codelineno-43-63 href=#__codelineno-43-63></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-64 name=__codelineno-43-64 href=#__codelineno-43-64></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-65 name=__codelineno-43-65 href=#__codelineno-43-65></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=p>.</span><span class=n>Annotations</span><span class=p>.</span><span class=n>message</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-66 name=__codelineno-43-66 href=#__codelineno-43-66></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-67 name=__codelineno-43-67 href=#__codelineno-43-67></a><span class=w>          </span><span class=err>{{</span><span class=w> </span><span class=p>.</span><span class=n>Annotations</span><span class=p>.</span><span class=n>message</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-68 name=__codelineno-43-68 href=#__codelineno-43-68></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=w> </span><span class=n>-</span><span class=err>}}</span>
<a id=__codelineno-43-69 name=__codelineno-43-69 href=#__codelineno-43-69></a><span class=w>          </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-70 name=__codelineno-43-70 href=#__codelineno-43-70></a>
<a id=__codelineno-43-71 name=__codelineno-43-71 href=#__codelineno-43-71></a><span class=w>   </span><span class=err>*</span><span class=n>Details</span><span class=err>:*</span>
<a id=__codelineno-43-72 name=__codelineno-43-72 href=#__codelineno-43-72></a><span class=w>     </span><span class=err>{{</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=p>.</span><span class=n>Labels</span><span class=p>.</span><span class=n>SortedPairs</span><span class=w> </span><span class=err>}}</span><span class=w> </span><span class=err>•</span><span class=w> </span><span class=err>*{{</span><span class=w> </span><span class=p>.</span><span class=n>Name</span><span class=w> </span><span class=err>}}:*</span><span class=w> </span><span class=err>`{{</span><span class=w> </span><span class=p>.</span><span class=n>Value</span><span class=w> </span><span class=err>}}`</span>
<a id=__codelineno-43-73 name=__codelineno-43-73 href=#__codelineno-43-73></a><span class=w>     </span><span class=err>{{</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-74 name=__codelineno-43-74 href=#__codelineno-43-74></a>
<a id=__codelineno-43-75 name=__codelineno-43-75 href=#__codelineno-43-75></a><span class=w>      </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
<a id=__codelineno-43-76 name=__codelineno-43-76 href=#__codelineno-43-76></a>
<a id=__codelineno-43-77 name=__codelineno-43-77 href=#__codelineno-43-77></a><span class=w>  </span><span class=err>{{</span><span class=n>-</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=err>}}</span>
</code></pre></div> </details> <!-- markdownlint-enable MD046 --> <h3 id=stockage-tres-longue-duree>Stockage très longue durée</h3> <p>Prometheus n'est pas adapté au stockage sur une longue durée de nos métriques. Il nous faudra alors utiliser VictoriaMetrics ou Thanos. Je n'ai pas pu explorer ces deux logiciels, n'ayant des métriques que sur une courte durée.</p> <p>L'avantage de VictoriaMetrics nous concernant est qu'il utilise le système PromQL comme Prometheus, nous n'aurons donc pas à apprendre un nouveau langage.</p> <p>Il pourra s'agit d'une piste d'enrichissement de ce tutorial dans le futur avec l'intégration de VictoriaMetrics.</p> <p>De plus, VictoriaMetrics n'est pas un système monolithique comme l'est Prometheus, chaque fonctionnalité est un binaire distinct ce qui permet de scale simplement sur un cluster Kubernetes ou autre</p> <h3 id=exporters>Exporters</h3> <p>Voici une liste d'exporter pour divers équipements/logiciels. Cependant, je n'ai pas testé ces derniers :</p> <table> <thead> <tr> <th><strong>Matériel/Logiciel</strong></th> <th style="text-align: center;"><strong>Lien</strong></th> </tr> </thead> <tbody> <tr> <td>JunOS</td> <td style="text-align: center;"><a href=https://github.com/czerwonk/junos_exporter>JunOS</a></td> </tr> <tr> <td>Cisco</td> <td style="text-align: center;"><a href=https://github.com/lwlcom/cisco_exporter>Cisco</a></td> </tr> <tr> <td>Mikrotik</td> <td style="text-align: center;"><a href=https://github.com/nshttpd/mikrotik-exporter>Mikrotik</a></td> </tr> <tr> <td>Windows</td> <td style="text-align: center;"><a href=https://github.com/martinlindhe/wmi_exporter>WMI</a></td> </tr> <tr> <td>VMWare</td> <td style="text-align: center;"><a href=https://github.com/pryorda/vmware_exporter>VMWare</a></td> </tr> <tr> <td>Proxmox</td> <td style="text-align: center;"><a href=https://github.com/znerol/prometheus-pve-exporter>Promxox</a></td> </tr> <tr> <td>CloudFlare</td> <td style="text-align: center;"><a href=https://github.com/wehkamp/docker-prometheus-cloudflare-exporter>CloudFlare</a></td> </tr> </tbody> </table> <p>Une <a href=https://github.com/prometheus/prometheus/wiki/Default-port-allocations>liste officielle</a> de tous les exporters Prometheus officielle est disponible, vous permettant de choisir l'exporter qu'il vous faut</p> <h2 id=conclusion>Conclusion</h2> <p>J'ai pris plaisir à écrire cet article malgré sa complexité et sa longueur. Creuser à travers toutes les documentations et autres sources a été un vrai plaisir.</p> <p>Toutes les formes de configuration n'ont pas été explorés. Par exemple, aucun de nos nodes sont en HA ou autre. J'espère pouvoir faire d'autres articles sur Prometheus en HA ou autre.</p> <p>Évidemment, il s'agit ici de la stack de monitoring que j'ai exploré, mais rien ne nous empêche de faire votre propre expérience sur d'autres exporters ou d'autres TSDB.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Dernière mise à jour"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="10 août 2025 13:02:31 UTC">10 août 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Créé> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="6 juin 2022 18:32:45 UTC">6 juin 2022</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Retour en haut de la page </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://twitter.com/Pixel__Art target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg> </a> <a href=https://github.com/PixiBixi target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["toc.integrate", "header.autohide", "navigation.tracking", "navigation.instant", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script> <script src=../../../../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../../../../nodoc_custom/js/matomo.js></script> </body> </html>